{"id":"beads_viewer-2a4","content_hash":"c3f5ece909ec587833876af382272d5dd41a17debb2c6185c9fa78ec9f945f7e","title":"Time-Travel Graph Diffing","description":"Compare graph structure across git commits to understand how the project evolved and detect structural regressions.\n\n## Background \u0026 Motivation\nSince beads are stored in git, we have full history available. Questions like 'What changed since last week?' or 'Did my changes introduce a bottleneck?' are answerable but not currently exposed.\n\n## Value Proposition\n- For Humans: Visualize progress, understand what changed during a sprint, postmortem analysis\n- For AI Agents: Structural regression detection - validate changes before committing\n\n## Technical Approach\n1. Add git history loader (read files at specific commit)\n2. Create snapshot comparison logic\n3. Generate diff report (new/closed issues, metric changes, new cycles)\n4. CLI: --diff-since \u003ccommit|date\u003e and --as-of \u003ccommit|date\u003e\n5. TUI: Highlight changed items\n\n## Key Features\n- Load historical state without checking out\n- Compare metrics (PageRank, betweenness) between snapshots\n- Detect new cycles or bottlenecks\n- 'What would change if I close these issues?' simulation","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:36:24.908588941Z","updated_at":"2025-11-27T00:52:08.797072508Z","closed_at":"2025-11-27T00:52:08.797072508Z","source_repo":".","labels":["analysis","git-integration","history"]}
{"id":"beads_viewer-2a4.1","content_hash":"973bb7b2968826bb8c9af29539dd7c6fa3c21b8b17f4c2fbf05ef75c3cf936b4","title":"Implement git history loader for beads files","description":"Load beads JSONL from specific git commit via 'git show \u003ccommit\u003e:.beads/beads.base.jsonl'. Beads tracks JSONL in git (SQLite is gitignored), so historical states are accessible. Support SHA, branch, tag, date resolution. Cache results for repeated access.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.831767762Z","updated_at":"2025-11-27T00:38:43.183395978Z","closed_at":"2025-11-27T00:38:43.183395978Z","source_repo":".","labels":["git","loader"]}
{"id":"beads_viewer-2a4.2","content_hash":"641335d6f37e9751b2bd7ef0802586ace3f61d6179e2e8e3ccb865a02f99d1df","title":"Create snapshot comparison and diff generation","description":"Compare two graph snapshots: NewIssues, ClosedIssues, RemovedIssues, ModifiedIssues, NewCycles, ResolvedCycles, MetricDelta.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.86809792Z","updated_at":"2025-11-27T00:44:08.356760918Z","closed_at":"2025-11-27T00:44:08.356760918Z","source_repo":".","labels":["analysis","diff"],"dependencies":[{"issue_id":"beads_viewer-2a4.2","depends_on_id":"beads_viewer-2a4.1","type":"blocks","created_at":"2025-11-26T23:40:24.793170034Z","created_by":"daemon"}]}
{"id":"beads_viewer-2a4.3","content_hash":"8ffbc1c24823428562523947a8b0265e4e6321981e23b33be6e76b842791cb8d","title":"Add --diff-since and --as-of CLI flags","description":"--diff-since \u003ccommit|date\u003e: Show changes since historical point. --as-of \u003ccommit|date\u003e: View state at point in time. --robot-diff for JSON output.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.908615408Z","updated_at":"2025-11-27T00:46:48.168851915Z","closed_at":"2025-11-27T00:46:48.168851915Z","source_repo":".","labels":["cli","git"],"dependencies":[{"issue_id":"beads_viewer-2a4.3","depends_on_id":"beads_viewer-2a4.2","type":"blocks","created_at":"2025-11-26T23:40:24.835018931Z","created_by":"daemon"}]}
{"id":"beads_viewer-2a4.4","content_hash":"69580111a0a0187c8f04c1c809d318c1a587af9dda27f1a85ddf92e4d3d5576f","title":"Add TUI diff highlighting and history mode","description":"'T' enters time-travel mode. ðŸ†• badge on new issues, âœ… on newly closed. Diff summary in footer. Optional side panel.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:11.95681875Z","updated_at":"2025-11-27T00:51:05.91959913Z","closed_at":"2025-11-27T00:51:05.91959913Z","source_repo":".","labels":["tui","visualization"],"dependencies":[{"issue_id":"beads_viewer-2a4.4","depends_on_id":"beads_viewer-2a4.2","type":"blocks","created_at":"2025-11-26T23:40:24.86441434Z","created_by":"daemon"}]}
{"id":"beads_viewer-2m2","content_hash":"de54d34a647f714f50705c3a69f0aa39662057acf5a9cb045956668308c3f010","title":"Add CI coverage reporting and thresholds","description":"CI currently runs tests but doesn't track or enforce coverage. Need full coverage infrastructure.\n\n## Current CI State\n- .github/workflows/ci.yml runs: go test -v ./...\n- No -cover flag\n- No coverage thresholds\n- No coverage badge in README\n- No coverage trend tracking\n\n## Required CI Changes\n\n### Coverage Collection\n```yaml\n- name: Run tests with coverage\n  run: |\n    go test -v -coverprofile=coverage.out -covermode=atomic ./...\n    go tool cover -func=coverage.out | tail -1\n```\n\n### Coverage Thresholds\nAdd coverage check step:\n```yaml\n- name: Check coverage thresholds\n  run: |\n    COVERAGE=$(go tool cover -func=coverage.out | tail -1 | awk '{print $3}' | tr -d '%')\n    echo \"Total coverage: $COVERAGE%\"\n    if (( $(echo \"$COVERAGE \u003c 80\" | bc -l) )); then\n      echo \"Coverage below 80% threshold\"\n      exit 1\n    fi\n```\n\n### Per-Package Thresholds\nSome packages need higher coverage:\n```yaml\n# pkg/analysis - 90% minimum (critical logic)\n# pkg/export - 95% minimum (user-facing output)\n# pkg/recipe - 90% minimum (user configuration)\n# pkg/ui - 70% minimum (harder to test)\n# pkg/loader - 85% minimum (file I/O critical)\n```\n\n### Coverage Badge\nAdd codecov or coveralls integration:\n```yaml\n- name: Upload coverage\n  uses: codecov/codecov-action@v3\n  with:\n    files: coverage.out\n    fail_ci_if_error: true\n```\n\n### README Badge\nAdd to README.md:\n```markdown\n[![Coverage](https://codecov.io/gh/owner/github.com/Dicklesworthstone/beads_viewer/branch/main/graph/badge.svg)](https://codecov.io/gh/owner/beads_viewer)\n```\n\n### Coverage Report Artifact\n```yaml\n- name: Generate coverage report\n  run: |\n    go tool cover -html=coverage.out -o coverage.html\n    \n- name: Upload coverage report\n  uses: actions/upload-artifact@v3\n  with:\n    name: coverage-report\n    path: coverage.html\n```\n\n## Package Coverage Targets\n\n| Package | Current | Target |\n|---------|---------|--------|\n| pkg/analysis | ~85% | 90% |\n| pkg/baseline | 90% | 95% |\n| pkg/drift | 89.5% | 95% |\n| pkg/export | 99.1% | 99% |\n| pkg/hooks | 73.8% | 85% |\n| pkg/loader | 63.2% | 85% |\n| pkg/model | 0% | 80% |\n| pkg/recipe | 93.1% | 95% |\n| pkg/ui | 52.5% | 75% |\n| pkg/updater | 56.8% | 80% |\n| pkg/watcher | 86.6% | 90% |\n| pkg/workspace | 90% | 95% |\n\n## Trend Tracking\nConfigure codecov.yml:\n```yaml\ncoverage:\n  status:\n    project:\n      default:\n        target: 85%\n        threshold: 2%  # Allow 2% drop\n    patch:\n      default:\n        target: 80%  # New code must be 80%+ covered\n```\n\n## Files to Modify\n- [ ] .github/workflows/ci.yml - Add coverage steps\n- [ ] codecov.yml (new) - Coverage configuration\n- [ ] README.md - Add coverage badge\n\n## Acceptance Criteria\n- [ ] CI fails if coverage drops below thresholds\n- [ ] Coverage badge shows in README\n- [ ] Coverage report available as artifact\n- [ ] Per-package coverage visible\n- [ ] New PRs show coverage diff","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-11-30T15:36:42.652238019Z","updated_at":"2025-11-30T17:56:01Z","source_repo":".","labels":["ci","coverage","testing"],"dependencies":[{"issue_id":"beads_viewer-2m2","depends_on_id":"beads_viewer-kn8","type":"blocks","created_at":"2025-11-30T15:39:22.303864326Z","created_by":"daemon"},{"issue_id":"beads_viewer-2m2","depends_on_id":"beads_viewer-81q","type":"blocks","created_at":"2025-11-30T15:39:22.611814809Z","created_by":"daemon"},{"issue_id":"beads_viewer-2m2","depends_on_id":"beads_viewer-3sm","type":"blocks","created_at":"2025-11-30T15:39:22.940920356Z","created_by":"daemon"},{"issue_id":"beads_viewer-2m2","depends_on_id":"beads_viewer-h75","type":"blocks","created_at":"2025-11-30T15:39:23.322372207Z","created_by":"daemon"}]}
{"id":"beads_viewer-3sm","content_hash":"cdd748c2fa943b415314f4ea483d33ef328591c9228b4dbdd4f6849edb0fd376","title":"Add pkg/loader error handling and edge case tests","description":"pkg/loader/loader.go has only 874 bytes of tests for 3.6KB of production code.\nCurrent coverage: 63.2% - needs improvement to 90%+.\n\n## Current Gaps\n- Error handling paths not tested\n- Edge cases not covered\n- File I/O errors not simulated\n\n## Required Tests (NO MOCKS - use real files)\n\n### File System Error Tests\n- [ ] Non-existent .beads directory\n- [ ] Non-existent beads.jsonl file\n- [ ] Permission denied on file read\n- [ ] Empty beads.jsonl file (0 bytes)\n- [ ] File with only whitespace/newlines\n\n### JSONL Parsing Tests\n- [ ] Valid single-line JSON\n- [ ] Valid multi-line JSONL\n- [ ] Malformed JSON (missing brace, invalid syntax)\n- [ ] Valid JSON but invalid Issue schema\n- [ ] Mixed valid/invalid lines (partial load)\n- [ ] Very long lines (\u003e1MB single issue)\n- [ ] Unicode in titles/descriptions (emoji, CJK, RTL)\n\n### Path Resolution Tests\n- [ ] Relative path resolution\n- [ ] Absolute path handling\n- [ ] Symlink handling\n- [ ] Path with spaces\n- [ ] Path with special characters\n\n### Large File Tests\n- [ ] 1000+ issues loading time\n- [ ] 10000+ issues memory usage\n- [ ] Streaming vs buffered comparison\n\n## Test Implementation Strategy\nUse t.TempDir() for isolated test directories:\n```go\nfunc TestLoadIssues_EmptyFile(t *testing.T) {\n    dir := t.TempDir()\n    beadsDir := filepath.Join(dir, \".beads\")\n    os.MkdirAll(beadsDir, 0755)\n    os.WriteFile(filepath.Join(beadsDir, \"beads.jsonl\"), []byte{}, 0644)\n    \n    issues, err := LoadIssues(dir)\n    // Assert empty slice, no error\n}\n```\n\n## Files\n- pkg/loader/loader.go (target)\n- pkg/loader/loader_test.go (enhance)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T15:31:21.287826282Z","updated_at":"2025-11-30T16:35:16.579102781Z","closed_at":"2025-11-30T16:35:16.579102781Z","source_repo":".","labels":["error-handling","loader","testing"]}
{"id":"beads_viewer-4eo","content_hash":"ad38afbdd411e835e1f8e9d2feef510c04552174fae01a55c8885ac1b96c660a","title":"Add pkg/updater network and version check tests","description":"pkg/updater has only 56.8% coverage. Network operations need thorough testing.\n\n## Current Gaps\n- No tests for actual HTTP requests (even with test server)\n- Version comparison logic incomplete coverage\n- Error handling paths not tested\n\n## Required Tests (NO MOCKS - use httptest)\n\n### Version Comparison Tests\n- [ ] CurrentVersion \u003c LatestVersion -\u003e update available\n- [ ] CurrentVersion = LatestVersion -\u003e no update\n- [ ] CurrentVersion \u003e LatestVersion -\u003e no update (dev build)\n- [ ] Invalid version strings handled\n- [ ] Pre-release versions (v1.0.0-beta)\n\n### HTTP Request Tests (using httptest.Server)\n```go\nfunc TestCheckForUpdate_Success(t *testing.T) {\n    server := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        json.NewEncoder(w).Encode(map[string]string{\n            \"tag_name\": \"v2.0.0\",\n            \"html_url\": \"https://github.com/...\",\n        })\n    }))\n    defer server.Close()\n    \n    // Override URL in updater\n    result, err := CheckForUpdate(server.URL)\n    // Assert...\n}\n```\n\n### Error Handling Tests\n- [ ] Network timeout\n- [ ] DNS failure\n- [ ] HTTP 404 response\n- [ ] HTTP 500 response\n- [ ] Invalid JSON response\n- [ ] Empty response body\n\n### Rate Limiting Tests\n- [ ] Respects check interval\n- [ ] Doesn't spam API\n- [ ] Cache still works after restart\n\n## Files\n- pkg/updater/updater.go\n- pkg/updater/updater_test.go (enhance)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T15:37:47.303355505Z","updated_at":"2025-11-30T15:37:47.303355505Z","source_repo":".","labels":["network","testing","updater"]}
{"id":"beads_viewer-52t","content_hash":"c172e0c3c4b30a0f1aa42fec136e8515b32eda8b16337f046e0c23c5e6941ba1","title":"Impact Radar \u0026 Drift Alerts","description":"Detect significant changes in graph metrics and alert when structure degrades.\n\n## Background \u0026 Motivation\nGraph metrics (PageRank, betweenness, cycles) can degrade over time without anyone noticing. A new cycle might be introduced, or a bottleneck might emerge. Proactive detection prevents issues from compounding.\n\n## Value Proposition\n- For Humans: Early warning when project health degrades\n- For AI Agents: Validate changes before committing - 'did I introduce a cycle?'\n\n## Technical Approach\n1. Baseline storage (snapshot of metrics at a point in time)\n2. Drift calculator (compare current to baseline)\n3. Threshold configuration (when to alert)\n4. CLI: --check-drift for CI integration\n\n## Alert Types\n- New cycles detected (critical)\n- Significant PageRank changes (potential new bottleneck)\n- Betweenness spike (new critical path node)\n- Density increase (complexity growing)\n\n## Success Criteria\n- CI can run --check-drift and fail on regressions\n- Clear exit codes: 0=OK, 1=critical, 2=warning\n- Human-readable and JSON output available","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-11-26T23:37:14.250670509Z","updated_at":"2025-11-30T15:05:08.015767175Z","closed_at":"2025-11-30T15:05:08.015767175Z","source_repo":".","labels":["ci","monitoring","quality"]}
{"id":"beads_viewer-52t.1","content_hash":"0a3fd70f73a5236102bc659cdff92c4b05092e389c9f55e0c765fa9aa455b1ea","title":"Implement baseline storage and management","description":".bv/baseline.json stores metrics snapshot. --save-baseline creates. --baseline-info shows. Includes commit annotation.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.112619185Z","updated_at":"2025-11-30T14:54:33.04376361Z","closed_at":"2025-11-30T14:54:33.04376361Z","source_repo":".","labels":["drift","storage"]}
{"id":"beads_viewer-52t.2","content_hash":"3b7789805fb05071e1a41e0731f03acbd57aedfa9b5a4a661ccf9e7833f069e7","title":"Create drift calculator with thresholds","description":"Compare current to baseline. Detect: new cycles (critical), PageRank changes (warning), density growth (info). Configurable thresholds in .bv/drift.yaml.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.152822369Z","updated_at":"2025-11-30T15:00:17.418141993Z","closed_at":"2025-11-30T15:00:17.418141993Z","source_repo":".","labels":["analysis","drift"],"dependencies":[{"issue_id":"beads_viewer-52t.2","depends_on_id":"beads_viewer-52t.1","type":"blocks","created_at":"2025-11-26T23:41:09.765068595Z","created_by":"daemon"}]}
{"id":"beads_viewer-52t.3","content_hash":"96ba6c1a418a74235155984a8a76329b0738e49ee80726c123bba11cee46f190","title":"Add --check-drift CLI for CI integration","description":"Exit codes: 0=OK, 1=critical, 2=warning. Human-readable and --robot-drift JSON output. CI example in docs.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.186627009Z","updated_at":"2025-11-30T15:04:43.666251271Z","closed_at":"2025-11-30T15:04:43.666251271Z","source_repo":".","labels":["ci","cli","drift"],"dependencies":[{"issue_id":"beads_viewer-52t.3","depends_on_id":"beads_viewer-52t.2","type":"blocks","created_at":"2025-11-26T23:41:09.795822648Z","created_by":"daemon"}]}
{"id":"beads_viewer-66u","content_hash":"33f7b836b36f5fe9ef2e4336ddf905f3dc9c94c4bba072934f9d56cb326ea0d6","title":"Add pkg/ui/delegate.go rendering tests","description":"pkg/ui/delegate.go has NO test coverage despite containing complex list item rendering logic.\n\n## Current Code (7.6KB)\n- IssueDelegate struct with 4 methods\n- Complex Render() method with width calculations\n- Priority badge rendering\n- Status badge rendering\n- Diff status badges\n- Repo prefix badges (workspace mode)\n- Selection highlighting\n\n## Required Tests (NO MOCKS)\n\n### IssueDelegate Interface Tests\n- [ ] Height() returns consistent value (1)\n- [ ] Spacing() returns consistent value (0)\n- [ ] Update() returns nil (no-op)\n\n### Render() Output Tests\nCreate tests that capture rendered output:\n- [ ] Basic issue rendering (ID, title, status visible)\n- [ ] Selected vs unselected styling differs\n- [ ] Priority badge shows correct P0-P5 format\n- [ ] Status badge shows correct status text\n- [ ] Very long title truncated correctly\n- [ ] Very short title padded correctly\n- [ ] Unicode in title handled correctly\n\n### Width Calculation Tests\n- [ ] Narrow width (40 chars) - minimal info shown\n- [ ] Medium width (80 chars) - standard layout\n- [ ] Wide width (120 chars) - all columns visible\n- [ ] Very wide (200 chars) - no overflow\n\n### Workspace Mode Tests\n- [ ] WorkspaceMode=false -\u003e no repo badge\n- [ ] WorkspaceMode=true -\u003e repo badge appears\n- [ ] Repo badge color consistent for same prefix\n- [ ] Repo badge truncated if prefix \u003e 4 chars\n\n### Priority Hints Tests\n- [ ] ShowPriorityHints=false -\u003e no hint indicator\n- [ ] ShowPriorityHints=true with increase hint -\u003e â†‘ shown\n- [ ] ShowPriorityHints=true with decrease hint -\u003e â†“ shown\n- [ ] Issue without hint in map -\u003e no indicator\n\n### Diff Status Tests\n- [ ] DiffStatusNone -\u003e no badge\n- [ ] DiffStatusNew -\u003e ðŸ†• badge\n- [ ] DiffStatusClosed -\u003e âœ… badge\n- [ ] DiffStatusModified -\u003e ~ badge\n\n## Test Strategy\nUse a bytes.Buffer to capture Render() output:\n```go\nfunc TestIssueDelegate_Render(t *testing.T) {\n    delegate := IssueDelegate{Theme: DefaultTheme()}\n    item := IssueItem{Issue: model.Issue{ID: \"TEST-1\", Title: \"Test Issue\"}}\n    \n    // Create mock list.Model with enough context\n    items := []list.Item{item}\n    l := list.New(items, delegate, 80, 10)\n    \n    var buf bytes.Buffer\n    delegate.Render(\u0026buf, l, 0, item)\n    \n    output := buf.String()\n    if !strings.Contains(output, \"TEST-1\") {\n        t.Error(\"ID not in output\")\n    }\n}\n```\n\n## Files\n- pkg/ui/delegate.go (target)\n- pkg/ui/delegate_test.go (create new)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T15:33:01.57852895Z","updated_at":"2025-11-30T16:28:55.522057437Z","closed_at":"2025-11-30T16:28:55.522057437Z","source_repo":".","labels":["rendering","testing","ui"],"dependencies":[{"issue_id":"beads_viewer-66u","depends_on_id":"beads_viewer-ym1","type":"blocks","created_at":"2025-11-30T15:39:21.390379658Z","created_by":"daemon"}]}
{"id":"beads_viewer-6g7","content_hash":"9fd1aa38c4cd0f29a27bd22663a3d19e996cbdc39f951dc3412705805700a1fa","title":"Refactor and test pkg/ui/model.go Update() method","description":"model.go is 71KB with 39+ functions but only 6 unit tests. The Update() method alone is 500+ lines handling all keyboard events. Current coverage: 52.5%.\n\n## Problem\nThe Update() method is a massive switch statement that:\n- Handles 7+ different view modes\n- Contains 200+ key bindings\n- Manages complex state transitions\n- Is nearly impossible to unit test in current form\n\n## Refactoring Strategy\n\n### Phase 1: Extract Key Handlers (NO behavior change)\nExtract each case in Update() into a named method:\n```go\n// Before (in Update):\ncase key.Matches(msg, keys.Enter):\n    // 50 lines of logic\n\n// After:\ncase key.Matches(msg, keys.Enter):\n    return m.handleEnterKey(msg)\n\nfunc (m Model) handleEnterKey(msg tea.KeyMsg) (Model, tea.Cmd) {\n    // Same 50 lines, now testable\n}\n```\n\n### Phase 2: Add Unit Tests for Each Handler\n- [ ] handleListKeys() - all list navigation keys\n- [ ] handleBoardKeys() - board view navigation\n- [ ] handleGraphKeys() - graph view navigation\n- [ ] handleActionableKeys() - actionable view\n- [ ] handleRecipePickerKeys() - recipe selection\n- [ ] handleInsightsKeys() - insights navigation\n- [ ] handleTimeTravelInputKeys() - time travel input\n- [ ] handleQuitConfirmKeys() - quit confirmation\n\n### Phase 3: Test State Transitions\n- [ ] List -\u003e Detail view transition\n- [ ] List -\u003e Board view transition\n- [ ] List -\u003e Graph view transition\n- [ ] Detail -\u003e back to List\n- [ ] Time travel mode entry/exit\n- [ ] Filter mode entry/exit\n- [ ] Search mode entry/exit\n\n### Phase 4: Test View Rendering\nExtract and test render functions:\n- [ ] renderListWithHeader()\n- [ ] renderSplitView()\n- [ ] renderFooter()\n- [ ] renderQuitConfirm()\n- [ ] renderTimeTravelInput()\n\n## Required Tests (39 functions need tests)\n\n### Core State Tests\n- [ ] NewModel() initializes all fields correctly\n- [ ] Init() returns expected command\n- [ ] View() produces valid output for each view mode\n\n### Message Handling Tests\n- [ ] WindowSizeMsg updates dimensions\n- [ ] IssuesUpdatedMsg refreshes list\n- [ ] VersionCheckMsg shows update notification\n- [ ] AnalysisCompleteMsg updates insights\n\n### Filter Tests\n- [ ] applyFilter() with empty filter\n- [ ] applyFilter() with matching text\n- [ ] applyFilter() with no matches\n- [ ] Filter clears when pressing Escape\n\n### Recipe Tests\n- [ ] applyRecipe() applies sort\n- [ ] applyRecipe() applies filter\n- [ ] Recipe picker shows available recipes\n\n### Time Travel Tests\n- [ ] enterTimeTravelMode() sets up diff state\n- [ ] exitTimeTravelMode() restores normal state\n- [ ] Time travel input parses dates correctly\n- [ ] Invalid time travel input shows error\n\n## Files\n- pkg/ui/model.go (refactor)\n- pkg/ui/model_test.go (enhance significantly)\n- pkg/ui/handlers.go (new file for extracted handlers)\n- pkg/ui/handlers_test.go (new test file)\n\n## Acceptance Criteria\n- [ ] model.go Update() is under 100 lines\n- [ ] Each key handler has â‰¥3 test cases\n- [ ] Coverage increases from 52.5% to â‰¥80%\n- [ ] No behavior changes (refactor only)","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-30T15:33:54.059160664Z","updated_at":"2025-11-30T15:33:54.059160664Z","source_repo":".","labels":["refactoring","testing","ui"],"dependencies":[{"issue_id":"beads_viewer-6g7","depends_on_id":"beads_viewer-ym1","type":"blocks","created_at":"2025-11-30T15:39:21.69945145Z","created_by":"daemon"},{"issue_id":"beads_viewer-6g7","depends_on_id":"beads_viewer-66u","type":"blocks","created_at":"2025-11-30T15:39:21.988093583Z","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"beads_viewer-6g7","author":"ubuntu","text":"## Refactoring Strategy - DO NOT CHANGE BEHAVIOR\n\nThis is a pure refactor. The goal is to make the code testable, not to add features or fix bugs.\n\n### Recommended Extraction Order\n\n1. **Extract message type handlers first**\n   Each `case someMsg:` in Update() becomes:\n   ```go\n   func (m Model) handleSomeMsg(msg someMsg) (Model, tea.Cmd) {\n       // Move existing code here unchanged\n   }\n   ```\n\n2. **Then extract key handlers per view**\n   ```go\n   func (m Model) handleListKeys(msg tea.KeyMsg) (Model, tea.Cmd)\n   func (m Model) handleBoardKeys(msg tea.KeyMsg) (Model, tea.Cmd)\n   func (m Model) handleGraphKeys(msg tea.KeyMsg) (Model, tea.Cmd)\n   ```\n\n3. **Finally extract render helpers**\n   ```go\n   func (m Model) renderListView() string\n   func (m Model) renderBoardView() string\n   func (m Model) renderDetailView() string\n   ```\n\n### Golden Rule\nAfter each extraction:\n1. Run `go build ./...` - must compile\n2. Run `go test ./pkg/ui/...` - existing tests must pass\n3. Commit the extraction\n\n### Test Writing Strategy\nFor each extracted function, write tests that:\n1. Set up initial Model state\n2. Call the extracted function\n3. Assert on returned Model state and tea.Cmd\n\nExample:\n```go\nfunc TestModel_handleEnterKey(t *testing.T) {\n    m := NewModel(testIssues, nil, \"\")\n    m.viewMode = ViewList\n    \n    newM, cmd := m.handleEnterKey(tea.KeyMsg{Type: tea.KeyEnter})\n    \n    if newM.viewMode != ViewDetail {\n        t.Errorf(\"expected ViewDetail, got %v\", newM.viewMode)\n    }\n}\n```\n\n### File Organization\nConsider creating:\n- pkg/ui/handlers.go - All key/message handlers\n- pkg/ui/handlers_test.go - Tests for handlers\n- pkg/ui/render.go - All render functions\n- pkg/ui/render_test.go - Tests for renders","created_at":"2025-11-30T19:31:14Z"}]}
{"id":"beads_viewer-81q","content_hash":"1ed44b362efa2e6d600dc6cf1ccd7fed6e2634e4ad33610a9a31e6832677488c","title":"Add pkg/model/types.go validation tests","description":"pkg/model/types.go defines core data structures but has ZERO test coverage.\n\n## Current State\n- File contains: Issue, Status, IssueType, Dependency, Comment structs\n- No validation logic is tested\n- No edge cases covered\n\n## Required Tests (NO MOCKS - use real structs)\n\n### Issue Struct Tests\n- [ ] Required fields validation (ID, Title must be non-empty)\n- [ ] Status enum values (all valid statuses recognized)\n- [ ] IssueType enum values (all valid types recognized)\n- [ ] Priority bounds (0-5 range validation)\n- [ ] CreatedAt/UpdatedAt consistency (updated \u003e= created)\n- [ ] ContentHash computation correctness\n- [ ] Labels array handling (empty, single, multiple)\n\n### Dependency Struct Tests\n- [ ] Self-reference detection (issue cannot depend on itself)\n- [ ] DependsOnID validation (non-empty)\n- [ ] Dependency type validation (blocks, relates-to, etc.)\n\n### Comment Struct Tests\n- [ ] Author validation (non-empty)\n- [ ] Body validation (non-empty)\n- [ ] CreatedAt required\n\n### Status Transition Tests\n- [ ] Valid transitions (open -\u003e in_progress -\u003e closed)\n- [ ] Invalid transitions detected\n- [ ] Reopen transitions\n\n## Test File Location\npkg/model/types_test.go (create new file)\n\n## Example Test Structure\n```go\nfunc TestIssue_Validation(t *testing.T) {\n    tests := []struct {\n        name    string\n        issue   Issue\n        wantErr bool\n    }{\n        {\"valid issue\", Issue{ID: \"TEST-1\", Title: \"Test\"}, false},\n        {\"empty ID\", Issue{ID: \"\", Title: \"Test\"}, true},\n        {\"empty title\", Issue{ID: \"TEST-1\", Title: \"\"}, true},\n    }\n    // ... test implementation\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T15:30:40.207719514Z","updated_at":"2025-11-30T16:28:35.173615657Z","closed_at":"2025-11-30T16:28:35.173615657Z","source_repo":".","labels":["model","testing","validation"]}
{"id":"beads_viewer-cam","content_hash":"7625a2b945d863cb511da43fcec9e375f1a4abcb9f0a5a9fa21ca1e3b60903c6","title":"Drift Detection Test Coverage","description":"Complete test coverage for the drift detection feature without mocks/fakes, plus comprehensive e2e integration tests with detailed logging.\n\n## Current State\n- Unit test coverage: 89.5%\n- Missing: ExampleConfig (0%), HasCritical/HasWarnings (0%), error paths in SaveConfig/LoadConfig\n- No e2e tests for drift feature\n\n## Goals\n1. 100% unit test coverage for pkg/drift/* without mocks\n2. Comprehensive e2e CLI integration tests\n3. Detailed test logging for debugging\n\n## Success Criteria\n- go test -cover shows 100% for pkg/drift\n- e2e tests verify full baseline to drift to alert workflow\n- Tests are self-documenting","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-30T15:23:09.06674829Z","updated_at":"2025-11-30T17:17:13.885064695Z","closed_at":"2025-11-30T17:17:13.885064695Z","source_repo":".","labels":["coverage","drift","testing"]}
{"id":"beads_viewer-cam.1","content_hash":"aea5344f397cecd30145ba159cb711dc7df3455dd7ceb9e282080b33f23fb0fb","title":"Unit tests: helper functions (HasCritical, HasWarnings, ExampleConfig)","description":"Add unit tests for currently uncovered helper functions in pkg/drift:\n\n## Functions to Test\n1. HasCritical() - currently 0% coverage\n2. HasWarnings() - currently 0% coverage  \n3. ExampleConfig() - currently 0% coverage\n\n## Test Cases\n- HasCritical: true when CriticalCount \u003e 0, false otherwise\n- HasWarnings: true when CriticalCount \u003e 0 OR WarningCount \u003e 0\n- ExampleConfig: returns valid YAML that can be parsed\n\n## Acceptance\n- All three functions have 100% coverage\n- Tests use real structs, no mocks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:23:38.802765573Z","updated_at":"2025-11-30T15:35:29.008245268Z","closed_at":"2025-11-30T15:35:29.008285568Z","source_repo":".","labels":["drift","testing","unit-test"]}
{"id":"beads_viewer-cam.10","content_hash":"ae0a23264ba67fa38b2cb406c148f89e92ea67e36ae77f437c44b7f578fbc874","title":"E2E tests: drift config customization","description":"E2E tests for custom drift thresholds via .bv/drift.yaml:\n\n## Custom Threshold Tests\n1. TestE2EConfigHigherThresholds:\n   - Set density_warning_pct: 200\n   - Trigger 100% density increase\n   - Verify: NO warning (below new threshold)\n\n2. TestE2EConfigLowerThresholds:\n   - Set blocked_increase_threshold: 1\n   - Add just 2 blocked issues\n   - Verify: warning triggered (above threshold)\n\n3. TestE2EConfigPartialOverride:\n   - Set only density_warning_pct: 75\n   - Verify other values use defaults\n   - Trigger 50% density (should be info, not warning)\n\n## Config File Creation\n4. TestE2EConfigFileCreation:\n   - Verify drift.yaml path is .bv/drift.yaml\n   - Verify YAML syntax is valid\n   - Verify comments are preserved\n\n## Logging\n- Log config file contents\n- Log which thresholds are active\n- Log expected vs actual behavior","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:28:04.573507685Z","updated_at":"2025-11-30T16:56:18.326789325Z","closed_at":"2025-11-30T16:56:18.326789325Z","source_repo":".","labels":["drift","e2e","testing"],"dependencies":[{"issue_id":"beads_viewer-cam.10","depends_on_id":"beads_viewer-cam.7","type":"blocks","created_at":"2025-11-30T15:28:04.585194267Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.11","content_hash":"1b9aa80a64227e14f9688839e7d7cdbb5b9d63837cb9353fc28f73e4e8a0f641","title":"Verify 100% coverage and test documentation","description":"Final verification that all coverage goals are met:\n\n## Coverage Verification\n1. Run: go test ./pkg/drift/... -cover\n2. Verify: 100% statement coverage\n3. Document any intentionally uncovered code\n\n## Test Quality Checklist\n- [ ] All tests have descriptive names\n- [ ] All tests have logging via t.Logf\n- [ ] Table-driven tests where appropriate\n- [ ] No mocks or fakes used\n- [ ] Edge cases documented in test comments\n\n## E2E Test Verification  \n- [ ] All e2e tests in tests/e2e/drift_test.go\n- [ ] Tests are independent (can run in any order)\n- [ ] Tests clean up after themselves (t.TempDir)\n- [ ] Detailed logging on failure\n- [ ] CI-friendly (no external dependencies)\n\n## Documentation\n- Update AGENTS.md if needed with drift testing info\n- Add comments explaining non-obvious test scenarios\n- Document how to run drift tests specifically\n\n## Final Checks\n- Run: go test ./... -v to verify no regressions\n- Run: go test ./tests/e2e/... -v for e2e suite","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T15:28:35.2085065Z","updated_at":"2025-11-30T15:28:35.2085065Z","source_repo":".","labels":["drift","testing","verification"],"dependencies":[{"issue_id":"beads_viewer-cam.11","depends_on_id":"beads_viewer-cam.5","type":"blocks","created_at":"2025-11-30T15:28:35.217126316Z","created_by":"ubuntu"},{"issue_id":"beads_viewer-cam.11","depends_on_id":"beads_viewer-cam.9","type":"blocks","created_at":"2025-11-30T15:28:35.228812473Z","created_by":"ubuntu"},{"issue_id":"beads_viewer-cam.11","depends_on_id":"beads_viewer-cam.10","type":"blocks","created_at":"2025-11-30T15:28:35.235587564Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.2","content_hash":"5669187e6528c577453519f1172deb85437c0e3b9a9076a2a32beba794f6f933","title":"Unit tests: config error paths (LoadConfig, SaveConfig)","description":"Complete coverage for config.go error handling paths:\n\n## Current Coverage\n- LoadConfig: 83.3% (missing: read error other than NotExist)\n- SaveConfig: 71.4% (missing: MkdirAll error, yaml.Marshal error)\n\n## Test Cases\n1. LoadConfig with unreadable file (permission denied)\n2. LoadConfig with invalid YAML syntax\n3. SaveConfig to unwritable directory\n4. SaveConfig with config that fails validation\n\n## Notes\n- Use t.TempDir() for isolation\n- May need to use file permissions to simulate errors\n- No mocks - use real filesystem","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:24:11.83623896Z","updated_at":"2025-11-30T16:52:16.901648518Z","closed_at":"2025-11-30T16:52:16.901648518Z","source_repo":".","labels":["drift","testing","unit-test"]}
{"id":"beads_viewer-cam.3","content_hash":"f080052473015329a293bc86500a85501613c4f9e1a8cf35419188e4d4886f59","title":"Unit tests: calculator method branches (checkActionable, checkCycles, checkDensity)","description":"Complete branch coverage for calculator methods:\n\n## Current Coverage Gaps\n- checkActionable: 77.8% - missing: actionable increase info path, blAction==0 case\n- checkCycles: 85.7% - missing: empty cycle key, baseline with cycles\n- checkDensity: 90% - missing: density info level (between info and warning threshold)\n\n## Test Cases\n1. checkActionable:\n   - Baseline actionable=0 (skip calculation)\n   - Actionable increased by 25% (info alert)\n   - Actionable increased by 50% (info alert, not warning)\n\n2. checkCycles:\n   - Baseline has cycles, current removes one (no new cycle alert)\n   - Both have same cycles (no alert)\n   - Empty cycles in both\n\n3. checkDensity:\n   - Density increased by 25% (info, not warning)\n   - Density decreased (no alert - only growth triggers)\n   - Baseline density=0 (skip)\n\n## Notes\n- Each test should log what scenario it's testing\n- Use table-driven tests for clarity","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:24:44.694941344Z","updated_at":"2025-11-30T16:04:48.222389463Z","closed_at":"2025-11-30T16:04:48.222389463Z","source_repo":".","labels":["drift","testing","unit-test"],"dependencies":[{"issue_id":"beads_viewer-cam.3","depends_on_id":"beads_viewer-cam.1","type":"blocks","created_at":"2025-11-30T15:24:44.706891736Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.4","content_hash":"9eaeddb091f083b12ff2346e120584bf7fae67d6bcf0ea23f44c4e66b3366077","title":"Unit tests: edge cases and boundary conditions","description":"Test edge cases and boundary conditions:\n\n## Edge Cases\n1. Zero baseline values:\n   - NodeCount=0, EdgeCount=0\n   - All metrics at zero\n\n2. Boundary values:\n   - Exactly at threshold (e.g., 50% density increase exactly)\n   - Just below threshold (49.9%)\n   - Just above threshold (50.1%)\n\n3. Large values:\n   - Very high node/edge counts\n   - PageRank values at extremes\n\n4. Empty data:\n   - Empty TopMetrics.PageRank slices\n   - Empty Cycles slices\n   - All counts at zero\n\n## Test Cases\n- TestCalculatorZeroBaseline\n- TestCalculatorBoundaryThresholds  \n- TestCalculatorEmptyMetrics\n- TestCalculatorLargeValues\n\n## Notes\n- Use t.Logf for detailed logging of what's being tested\n- Document each boundary condition clearly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:25:13.457169241Z","updated_at":"2025-11-30T16:10:27.702731311Z","closed_at":"2025-11-30T16:10:27.702731311Z","source_repo":".","labels":["drift","testing","unit-test"],"dependencies":[{"issue_id":"beads_viewer-cam.4","depends_on_id":"beads_viewer-cam.3","type":"blocks","created_at":"2025-11-30T15:25:13.485002864Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.5","content_hash":"772dace10b410cb3f05d0146c8605cdff841dde0f600ff223933359ef6f69d49","title":"Unit tests: Summary output branches","description":"Complete coverage for Summary() method (currently 86.4%):\n\n## Missing Coverage\n- Info-only alerts (no critical/warning)\n- Multiple alerts of same type\n- Alerts with empty Details slice\n- Alerts with multiple Details entries\n\n## Test Cases\n1. TestSummaryInfoOnly - only info alerts present\n2. TestSummaryMultipleAlerts - mix of critical, warning, info\n3. TestSummaryWithDetails - alerts containing detail strings\n4. TestSummaryEmptyDetails - alerts with nil/empty Details\n\n## Output Verification\n- Check for correct emoji icons per severity\n- Verify proper formatting of details list\n- Ensure trailing newline present","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:25:42.815455515Z","updated_at":"2025-11-30T16:07:43.822918583Z","closed_at":"2025-11-30T16:07:43.822918583Z","source_repo":".","labels":["drift","testing","unit-test"],"dependencies":[{"issue_id":"beads_viewer-cam.5","depends_on_id":"beads_viewer-cam.1","type":"blocks","created_at":"2025-11-30T15:25:42.831823744Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.6","content_hash":"baa07283650decda4500ffc421826922babc987df287ca959a760814e64a731e","title":"E2E tests: basic drift workflow (save baseline, check drift)","description":"Create e2e tests for basic drift detection workflow in tests/e2e/drift_test.go:\n\n## Test Scenarios\n1. TestE2EDriftNoChange:\n   - Create .beads with sample issues\n   - Run: bv --save-baseline 'test'\n   - Run: bv --check-drift\n   - Verify: exit code 0, 'No drift detected' message\n\n2. TestE2EDriftDetected:\n   - Create baseline with 10 issues\n   - Modify .beads to add 5 blocked issues\n   - Run: bv --check-drift\n   - Verify: exit code 2 (warning), blocked increase alert\n\n3. TestE2EDriftCritical:\n   - Create baseline with no cycles\n   - Modify .beads to introduce a cycle\n   - Run: bv --check-drift  \n   - Verify: exit code 1 (critical), new cycle alert\n\n## Implementation Pattern\n- Build binary fresh\n- Use t.TempDir() for isolation\n- Create realistic .beads/beads.jsonl files\n- Capture and log all output for debugging\n- Use t.Logf extensively\n\n## Logging Requirements\n- Log each step: 'Step 1: Creating baseline...'\n- Log full command output on failure\n- Log expected vs actual for assertions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:26:15.097008559Z","updated_at":"2025-11-30T16:57:58.975729411Z","closed_at":"2025-11-30T16:57:58.975729411Z","source_repo":".","labels":["drift","e2e","testing"],"dependencies":[{"issue_id":"beads_viewer-cam.6","depends_on_id":"beads_viewer-cam.4","type":"blocks","created_at":"2025-11-30T15:26:15.108973453Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.7","content_hash":"b35250e481f57011badf89ab119a4adf996de54145a3708ec8e43c08126ae81d","title":"E2E tests: all alert types (cycles, density, blocked, actionable, PageRank)","description":"E2E tests triggering each alert type:\n\n## Test Cases\n\n1. TestE2EAlertNewCycle:\n   - Baseline: no cycles\n   - Current: A-\u003eB-\u003eC-\u003eA cycle\n   - Expected: critical alert, exit 1\n\n2. TestE2EAlertDensityGrowth:\n   - Baseline: 10 nodes, 10 edges (density 0.1)\n   - Current: 10 nodes, 20 edges (density 0.2, 100% increase)\n   - Expected: warning alert, exit 2\n\n3. TestE2EAlertBlockedIncrease:\n   - Baseline: 2 blocked issues\n   - Current: 8 blocked issues (+6)\n   - Expected: warning alert, exit 2\n\n4. TestE2EAlertActionableDecrease:\n   - Baseline: 10 actionable\n   - Current: 5 actionable (-50%)\n   - Expected: warning alert, exit 2\n\n5. TestE2EAlertPageRankChange:\n   - Baseline: issue-1 has high PageRank\n   - Current: issue-1 removed, new bottleneck\n   - Expected: warning alert, exit 2\n\n6. TestE2EAlertInfoOnly:\n   - Trigger only info-level alerts\n   - Expected: exit 0 (info doesn't fail)\n\n## Logging\n- Log the exact JSONL content used\n- Log baseline save output\n- Log drift check output  \n- Log expected vs actual exit codes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:26:38.496541468Z","updated_at":"2025-11-30T17:17:06.500925676Z","closed_at":"2025-11-30T17:17:06.500925676Z","source_repo":".","labels":["drift","e2e","testing"],"dependencies":[{"issue_id":"beads_viewer-cam.7","depends_on_id":"beads_viewer-cam.6","type":"blocks","created_at":"2025-11-30T15:26:38.520605289Z","created_by":"daemon"}]}
{"id":"beads_viewer-cam.8","content_hash":"e417f924fcbb7c217239e2d1ec0eee55384335eaddd362960598d2041582ec7e","title":"E2E tests: CLI output formats (human-readable, JSON, exit codes)","description":"E2E tests for CLI output formats:\n\n## Human-Readable Output Tests\n1. TestE2EOutputNoDrift:\n   - Verify exact message: 'No drift detected...'\n   - Verify trailing newline\n\n2. TestE2EOutputWithAlerts:\n   - Verify 'Drift Analysis Summary' header\n   - Verify emoji icons present (ðŸ”´, ðŸŸ¡, ðŸ”µ)\n   - Verify CRITICAL/WARNING/INFO counts\n   - Verify 'Details:' section formatting\n\n## JSON Output Tests (--robot-drift)\n3. TestE2ERobotDriftNoDrift:\n   - Verify valid JSON structure\n   - Verify: has_drift=false, exit_code=0\n   - Verify: alerts=[]\n\n4. TestE2ERobotDriftWithAlerts:\n   - Verify JSON schema matches expected\n   - Verify: generated_at is ISO8601\n   - Verify: summary.critical/warning/info counts\n   - Verify: alerts array contains expected types\n   - Verify: baseline.created_at present\n\n## Exit Code Tests\n5. TestE2EExitCodeNoDrift: exit 0\n6. TestE2EExitCodeInfoOnly: exit 0  \n7. TestE2EExitCodeWarning: exit 2\n8. TestE2EExitCodeCritical: exit 1\n9. TestE2EExitCodeCriticalOverridesWarning: exit 1\n\n## Logging\n- Log full stdout/stderr\n- Log parsed JSON on JSON tests\n- Log exit code explicitly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:27:08.348330505Z","updated_at":"2025-11-30T17:17:06.532764741Z","closed_at":"2025-11-30T17:17:06.532764741Z","source_repo":".","labels":["drift","e2e","testing"],"dependencies":[{"issue_id":"beads_viewer-cam.8","depends_on_id":"beads_viewer-cam.6","type":"blocks","created_at":"2025-11-30T15:27:08.361609607Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-cam.9","content_hash":"2c55de633537b6c3569be2fdee8b7634cb5d46b774ef244caa12e639e168b5be","title":"E2E tests: error handling (missing baseline, corrupt files, invalid config)","description":"E2E tests for error conditions:\n\n## Missing Baseline\n1. TestE2EErrorNoBaseline:\n   - Run --check-drift without saving baseline first\n   - Verify: stderr contains 'No baseline found'\n   - Verify: stderr contains 'Create one with'\n   - Verify: exit code 1\n\n## Corrupt Baseline File\n2. TestE2EErrorCorruptBaseline:\n   - Create .bv/baseline.json with invalid JSON\n   - Run: bv --check-drift\n   - Verify: error message about loading baseline\n   - Verify: non-zero exit code\n\n## Invalid Drift Config\n3. TestE2EErrorInvalidConfig:\n   - Create .bv/drift.yaml with invalid values (density_warning_pct: -50)\n   - Run: bv --check-drift\n   - Verify: warning about config error\n   - Verify: falls back to defaults (continues working)\n\n## Missing Issues\n4. TestE2EErrorNoIssues:\n   - Create empty .beads directory\n   - Run: bv --save-baseline 'test'\n   - Verify: handles gracefully\n\n## Logging\n- Log exact error messages received\n- Log file contents that triggered errors\n- Log full stderr output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T15:27:36.097445468Z","updated_at":"2025-11-30T17:17:06.538485207Z","closed_at":"2025-11-30T17:17:06.538485207Z","source_repo":".","labels":["drift","e2e","testing"],"dependencies":[{"issue_id":"beads_viewer-cam.9","depends_on_id":"beads_viewer-cam.6","type":"blocks","created_at":"2025-11-30T15:27:36.115422337Z","created_by":"ubuntu"}]}
{"id":"beads_viewer-epf","content_hash":"eb85af587dfd78d5a420b64c1a76a730f2cf0d2a818eaf9f4875526eb16905c2","title":"Multi-Repo Aggregation View","description":"Unified view across multiple .beads/ directories for monorepos and multi-service projects.\n\n## Background \u0026 Motivation\nOrganizations often have:\n- Monorepos with multiple services\n- Microservices with separate repos\n- Frontend/backend splits\n\nCurrently, bv only shows one project at a time.\n\n## Value Proposition\n- For Humans: Single view of all project issues\n- For AI Agents: Cross-repo dependency visibility, scoped queries\n\n## Technical Approach\n1. Workspace configuration file\n2. Namespaced IDs (repo:issue-id)\n3. Aggregate loader merging multiple sources\n4. Cross-repo dependency support\n5. Repo-scoped filtering\n\n## Key Challenges\n- ID collision handling\n- Performance with many repos\n- Cross-repo dependency semantics\n- Clear provenance in UI","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-26T23:36:47.330165384Z","updated_at":"2025-11-30T15:00:56.353084767Z","closed_at":"2025-11-30T15:00:56.353084767Z","source_repo":".","labels":["multi-repo","scalability"]}
{"id":"beads_viewer-epf.1","content_hash":"32dca359e0240754a531e26d93a78b8b293d7269182c61f81b93ad02ecfd0627","title":"Design workspace configuration schema","description":".bv/workspace.yaml schema: repos list with name/path/prefix. Auto-discovery mode for common layouts. Validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:38.960959499Z","updated_at":"2025-11-27T00:28:49.69998534Z","closed_at":"2025-11-27T00:28:49.69998534Z","source_repo":".","labels":["configuration","multi-repo"]}
{"id":"beads_viewer-epf.2","content_hash":"813dff479d165a46222c6348a8f412fa2adccdba3cb4e4df22d51ac4d48de255","title":"Implement namespaced ID system","description":"Format: \u003cprefix\u003e:\u003coriginal_id\u003e (e.g., BE:AUTH-123). Cross-repo deps use full namespaced IDs. Display adapts to context.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.005212011Z","updated_at":"2025-11-27T00:35:44.393367613Z","closed_at":"2025-11-27T00:35:44.393367613Z","source_repo":".","labels":["data-model","multi-repo"],"dependencies":[{"issue_id":"beads_viewer-epf.2","depends_on_id":"beads_viewer-epf.1","type":"blocks","created_at":"2025-11-26T23:40:52.523325399Z","created_by":"daemon"}]}
{"id":"beads_viewer-epf.3","content_hash":"229b90cee1e4d4014abf5d27efd0db196746dea914f46e0b860dd71bb5ce8add","title":"Create aggregate loader for multiple repos","description":"LoadAll() merges repos. Namespacing during load. Failed repos logged but don't break. Parallel loading with errgroup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.047698605Z","updated_at":"2025-11-30T14:40:56.418030041Z","closed_at":"2025-11-30T14:40:56.418030041Z","source_repo":".","labels":["loader","multi-repo","performance"],"dependencies":[{"issue_id":"beads_viewer-epf.3","depends_on_id":"beads_viewer-epf.2","type":"blocks","created_at":"2025-11-26T23:40:52.567719135Z","created_by":"daemon"}]}
{"id":"beads_viewer-epf.4","content_hash":"5abfc9b9dac16ebe1e00b3a6c199d1c79347c6c57951a6ab7ee4f570a1486cd1","title":"Add --workspace CLI flag and TUI repo filter","description":"--workspace \u003cconfig\u003e loads multiple repos. --repo filters. TUI: repo indicator in header, toggle repos, [BE] prefix on items.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.092988926Z","updated_at":"2025-11-30T15:12:16.319210972Z","closed_at":"2025-11-30T15:12:16.319210972Z","source_repo":".","labels":["cli","multi-repo","tui"],"dependencies":[{"issue_id":"beads_viewer-epf.4","depends_on_id":"beads_viewer-epf.3","type":"blocks","created_at":"2025-11-26T23:40:52.597957664Z","created_by":"daemon"}]}
{"id":"beads_viewer-h75","content_hash":"3bfefaaf7b10a44d17a9c6d43a18090878dd173b8045e1a9f63c5daa8eaf98c8","title":"Expand E2E integration test suite","description":"Current E2E suite has only 2 tests. Need comprehensive coverage of all CLI functionality.\n\n## Current E2E Tests\n1. TestEndToEndBuildAndRun - basic version check\n2. TestEndToEndRobotPlan - single robot flag test\n\n## Required E2E Tests (NO MOCKS - real binary execution)\n\n### Robot Flag Tests\nEach --robot-* flag needs full E2E testing:\n- [ ] --robot-insights: Verify JSON structure, all metrics present\n- [ ] --robot-plan: Test with various dependency patterns\n- [ ] --robot-priority: Test recommendation generation\n- [ ] --robot-diff: Test with git history\n- [ ] --robot-recipes: Test recipe listing\n- [ ] --robot-drift: Test baseline comparison\n\n### Recipe Tests\n- [ ] --recipe actionable: Filters to actionable only\n- [ ] --recipe blocked: Shows blocked items\n- [ ] --recipe high-impact: Sorts by impact\n- [ ] --recipe stale: Shows old items\n- [ ] -r shorthand works\n\n### Diff/History Tests\n- [ ] --diff-since with commit SHA\n- [ ] --diff-since with relative date\n- [ ] --diff-since with branch name\n- [ ] --as-of with various formats\n\n### Workspace Tests\n- [ ] --workspace loads from config\n- [ ] --repo filters by prefix\n- [ ] Multiple repos aggregated correctly\n- [ ] Failed repo doesn't break load\n\n### Export Tests\n- [ ] --export-md creates valid markdown\n- [ ] --export-md with hooks runs hooks\n- [ ] --no-hooks skips hook execution\n\n### Baseline/Drift Tests\n- [ ] --save-baseline creates file\n- [ ] --baseline-info shows saved data\n- [ ] --check-drift compares correctly\n- [ ] Exit codes match documentation\n\n### Error Handling Tests\n- [ ] Invalid recipe name -\u003e helpful error\n- [ ] Missing beads directory -\u003e clear message\n- [ ] Malformed JSONL -\u003e graceful handling\n- [ ] Invalid --diff-since ref -\u003e error message\n\n### Performance E2E Tests\n- [ ] Small project (10 issues) \u003c 100ms\n- [ ] Medium project (100 issues) \u003c 500ms\n- [ ] Large project (500 issues) \u003c 2s\n- [ ] XL project (2000 issues) \u003c 5s\n\n## Test Infrastructure Needed\n\n### Helper Functions\n```go\nfunc runBV(t *testing.T, args ...string) (stdout, stderr string, exitCode int)\nfunc createTestProject(t *testing.T, issues []model.Issue) string\nfunc assertJSONContains(t *testing.T, json, path string, expected interface{})\n```\n\n### Test Data Generators\n```go\nfunc generateIssuesWithCycles(count, cycleCount int) []model.Issue\nfunc generateDeepDependencyChain(depth int) []model.Issue\nfunc generateWideDependencyGraph(breadth, depth int) []model.Issue\n```\n\n### Logging Requirements\nEach test should log:\n- Command being run\n- Full stdout/stderr\n- Timing information\n- Assertion details on failure\n\n## Files\n- tests/e2e/main_test.go (expand)\n- tests/e2e/robot_test.go (new)\n- tests/e2e/recipe_test.go (new)\n- tests/e2e/workspace_test.go (new)\n- tests/e2e/performance_test.go (new)\n- tests/e2e/helpers_test.go (new)\n\n## Acceptance Criteria\n- [ ] All --robot-* flags have E2E tests\n- [ ] All error conditions tested\n- [ ] Performance baselines established\n- [ ] Tests run in CI without flakiness","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T15:34:49.206420604Z","updated_at":"2025-11-30T16:31:05.599566338Z","closed_at":"2025-11-30T16:31:05.599566338Z","source_repo":".","labels":["e2e","integration","testing"],"dependencies":[{"issue_id":"beads_viewer-h75","depends_on_id":"beads_viewer-kn8","type":"blocks","created_at":"2025-11-30T15:39:20.940612778Z","created_by":"ubuntu"}],"comments":[{"id":2,"issue_id":"beads_viewer-h75","author":"ubuntu","text":"## E2E Test Organization\n\n### Directory Structure\n```\ntests/e2e/\nâ”œâ”€â”€ main_test.go         # Existing basic tests\nâ”œâ”€â”€ helpers_test.go      # Shared test utilities\nâ”œâ”€â”€ robot_flags_test.go  # All --robot-* flag tests\nâ”œâ”€â”€ recipes_test.go      # Recipe application tests\nâ”œâ”€â”€ workspace_test.go    # Multi-repo workspace tests\nâ”œâ”€â”€ history_test.go      # --diff-since, --as-of tests\nâ”œâ”€â”€ export_test.go       # --export-md tests\nâ”œâ”€â”€ baseline_test.go     # Baseline/drift tests\nâ”œâ”€â”€ errors_test.go       # Error handling tests\nâ””â”€â”€ performance_test.go  # Performance regression tests\n```\n\n### Helper Functions to Implement\n\n```go\n// runBV executes bv binary with args and returns output\nfunc runBV(t *testing.T, dir string, args ...string) (stdout, stderr string, exitCode int) {\n    t.Helper()\n    cmd := exec.Command(\"./bv\", args...)\n    cmd.Dir = dir\n    // ... implementation\n}\n\n// createTestProject creates a temp dir with beads data\nfunc createTestProject(t *testing.T, issues []model.Issue) string {\n    t.Helper()\n    dir := t.TempDir()\n    beadsDir := filepath.Join(dir, \".beads\")\n    os.MkdirAll(beadsDir, 0755)\n    // Write issues to beads.jsonl\n    return dir\n}\n\n// assertJSONPath checks a JSON path has expected value\nfunc assertJSONPath(t *testing.T, jsonStr, path string, expected interface{}) {\n    t.Helper()\n    // Use gjson or similar to navigate JSON\n}\n\n// generateTestIssues creates issues with specific characteristics\nfunc generateTestIssues(opts ...Option) []model.Issue {\n    // Flexible generator\n}\n```\n\n### Test Naming Convention\n```\nTest\u003cArea\u003e_\u003cScenario\u003e_\u003cExpectedOutcome\u003e\n\nExamples:\nTestRobotPlan_WithCycles_IncludesCycleWarning\nTestRobotInsights_EmptyProject_ReturnsEmptyMetrics\nTestRecipe_InvalidName_ReturnsHelpfulError\nTestWorkspace_PartialLoadFailure_ContinuesWithSuccessful\n```\n\n### Logging Requirements\nEach test should output:\n```\n=== RUN   TestRobotPlan_WithCycles_IncludesCycleWarning\n    e2e_test.go:45: Creating test project with 10 issues, 2 cycles\n    e2e_test.go:52: Running: ./bv --robot-plan\n    e2e_test.go:58: Command completed in 156ms, exit code 0\n    e2e_test.go:64: Validating JSON output...\n    e2e_test.go:71: Found cycles warning in output: OK\n--- PASS: TestRobotPlan_WithCycles_IncludesCycleWarning (0.21s)\n```","created_at":"2025-11-30T19:31:14Z"}]}
{"id":"beads_viewer-kn8","content_hash":"ba43f51ee8eebb88971cc65f1cb8d70323620ac83c84d655fca86ce0941b7930","title":"Fix failing performance regression tests","description":"Two tests in pkg/analysis are currently failing and must be fixed immediately:\n\n## Failing Tests\n1. **TestE2EStartup_NoRegression** - large_500 project regressed to 953ms (threshold: 800ms)\n2. **TestPhase1Only_LargeProject** - Status unclear\n\n## Root Cause Investigation\n- Profile the large_500 test case to identify bottleneck\n- Compare against previous passing runs (git bisect if needed)\n- Check if threshold is too aggressive or if real regression occurred\n\n## Acceptance Criteria\n- [ ] Both tests passing consistently\n- [ ] If threshold adjusted, documented why with benchmark data\n- [ ] If code fixed, regression test added to prevent recurrence\n- [ ] Add detailed timing logs to identify slow phases\n\n## Files to Investigate\n- pkg/analysis/e2e_startup_test.go\n- pkg/analysis/graph.go (main analysis engine)\n- pkg/analysis/betweenness_approx.go (known expensive operation)\n\n## Approach\n1. Run tests with -v to get detailed output\n2. Add timing instrumentation if not present\n3. Profile with go test -cpuprofile\n4. Fix or adjust thresholds with justification","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-11-30T15:29:57.978076352Z","updated_at":"2025-11-30T16:28:37.782257997Z","source_repo":".","labels":["critical","performance","testing"],"comments":[{"id":3,"issue_id":"beads_viewer-kn8","author":"ubuntu","text":"## Implementation Guidance\n\n### Step 1: Reproduce the Failure\n```bash\ngo test -v ./pkg/analysis -run TestE2EStartup_NoRegression\ngo test -v ./pkg/analysis -run TestPhase1Only_LargeProject\n```\n\n### Step 2: Profile if Regression is Real\n```bash\ngo test -v ./pkg/analysis -run TestE2EStartup_NoRegression -cpuprofile=cpu.prof\ngo tool pprof -http=:8080 cpu.prof\n```\n\n### Step 3: Identify Bottleneck\nLook for:\n- Betweenness centrality taking too long\n- PageRank not converging quickly\n- Cycle detection exponential blowup\n\n### Step 4: Fix Options\n1. **Optimize algorithm** - if real regression found\n2. **Adjust threshold** - if test is too aggressive for current hardware\n3. **Skip expensive metrics** - for large graphs, skip betweenness\n\n### Step 5: Add Logging\nAdd timing logs to identify slow phases:\n```go\nt.Logf(\"Phase 1 took %v\", phase1Duration)\nt.Logf(\"PageRank took %v\", prDuration)\nt.Logf(\"Betweenness took %v\", btDuration)\n```\n\n### Expected Timeline\n- Investigation: 1-2 hours\n- Fix implementation: 1-2 hours\n- Validation: 30 minutes","created_at":"2025-11-30T19:31:14Z"}]}
{"id":"beads_viewer-lkk","content_hash":"c17ed7f44f551545c9a609cbc0dc4b181ca5160e7da180a687d0ed5b4dd978aa","title":"AI-Aware Kanban Autoprioritizer","description":"Use graph metrics (PageRank, betweenness, freshness, blocker count) to suggest priority adjustments and surface high-impact items.\n\n## Background \u0026 Motivation\nThe analysis package computes rich metrics but they're only visible in the insights panel. Users and agents want actionable recommendations: 'These 5 items should be prioritized because they unblock the most work.'\n\n## Value Proposition\n- For Humans: 'Smart suggestions' that explain why items should be reprioritized\n- For AI Agents: --robot-priority provides a ranked work queue with reasoning\n\n## Technical Approach\n1. Create priority scoring function combining multiple metrics\n2. Generate recommendations comparing current vs suggested priority\n3. CLI: --robot-priority outputs priority-ranked JSON with explanations\n4. TUI: 'Suggested' badge/indicator on items\n\n## Scoring Function\nimpact_score = (\n    0.3 * normalized_pagerank +\n    0.3 * normalized_betweenness +\n    0.2 * blocker_count / max_blocker_count +\n    0.1 * freshness_penalty +\n    0.1 * explicit_priority_boost\n)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:36:10.969534571Z","updated_at":"2025-11-27T01:03:35.76590347Z","closed_at":"2025-11-27T01:03:35.76590347Z","source_repo":".","labels":["ai-agent","analysis","prioritization"]}
{"id":"beads_viewer-lkk.1","content_hash":"34e37ee0f39326013b36807605ab84513c4c07eba2a05accdcb8ad0606f948df","title":"Implement priority scoring function","description":"Create composite scoring combining PageRank (30%), Betweenness (30%), Blocker count (20%), Staleness (10%), Explicit priority (10%).\n\n## Algorithm\nfunc (a *Analyzer) ComputeImpactScore(issue *model.Issue) ImpactScore:\n  - Normalize all metrics to 0-1 range\n  - Apply weights: 0.3*pagerank + 0.3*betweenness + 0.2*blockerRatio + 0.1*staleness + 0.1*priorityBoost\n  - Return: IssueID, ImpactScore, ScoreBreakdown map\n\n## Staleness Penalty\n- Days since update, normalized: min(daysSinceUpdate / 30, 1.0)\n- Older items get slight penalty to surface them\n\n## Priority Boost\n- P0=1.0, P1=0.75, P2=0.5, P3=0.25, P4=0.0 (higher priority = higher boost)\n\n## File Changes\n- pkg/analysis/priority.go: New scoring logic\n- pkg/analysis/priority_test.go: Tests with known values","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.597660662Z","updated_at":"2025-11-27T00:26:30.580840974Z","closed_at":"2025-11-27T00:26:30.580840974Z","source_repo":".","labels":["analysis","core-logic"]}
{"id":"beads_viewer-lkk.2","content_hash":"b432bbd30c20da85d6a60093227e1e1a68261d400ceb8b482e2e8354c67243b1","title":"Generate priority recommendations with explanations","description":"Compare impact scores to current priorities and generate actionable recommendations.\n\n## Output Structure\ntype PriorityRecommendation struct {\n    IssueID           string\n    CurrentPriority   int\n    SuggestedPriority int\n    ImpactScore       float64\n    Confidence        float64  // 0-1, higher when score difference is large\n    Reasoning         []string // Human-readable explanations\n}\n\n## Reasoning Templates\n- 'Blocks N high-priority items' (when UnblocksCount \u003e 2)\n- 'Critical path bottleneck' (when Betweenness \u003e 0.5)\n- 'High centrality in graph' (when PageRank \u003e 0.3)\n- 'Stale for N days' (when staleness penalty applied)\n\n## Confidence Calculation\n- Large score vs priority mismatch = high confidence\n- Multiple reasoning factors = higher confidence\n- Single weak signal = low confidence\n\n## File Changes\n- pkg/analysis/priority.go: Add recommendation generation\n- pkg/analysis/priority_test.go: Test recommendations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.639885343Z","updated_at":"2025-11-27T00:31:17.416692038Z","closed_at":"2025-11-27T00:31:17.416692038Z","source_repo":".","labels":["analysis","recommendations"],"dependencies":[{"issue_id":"beads_viewer-lkk.2","depends_on_id":"beads_viewer-lkk.1","type":"blocks","created_at":"2025-11-26T23:40:11.711767711Z","created_by":"daemon"}]}
{"id":"beads_viewer-lkk.3","content_hash":"aead0c3e808cd26737f49147b7e5379b72f2ca11ded5f9c76007ecc5c8c880cc","title":"Add --robot-priority CLI flag","description":"Output priority recommendations as JSON for AI agents and scripts.\n\n## Flag Definition\nrobotPriority := flag.Bool('robot-priority', false, 'Output priority recommendations as JSON')\n\n## Output Format\n{\n  'recommendations': [{\n    'id': 'issue-123',\n    'current_priority': 2,\n    'suggested_priority': 0,\n    'impact_score': 0.85,\n    'confidence': 0.9,\n    'reasoning': ['Blocks 5 high-priority items', 'Critical path bottleneck']\n  }],\n  'summary': {\n    'total_issues': 50,\n    'recommendations': 8,\n    'high_confidence': 3\n  }\n}\n\n## Sorting\n- Sort by confidence DESC, then impact_score DESC\n- Top issues are most confident recommendations\n\n## File Changes\n- cmd/bv/main.go: Add flag and output logic","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.677162491Z","updated_at":"2025-11-27T00:32:47.17308551Z","closed_at":"2025-11-27T00:32:47.17308551Z","source_repo":".","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"beads_viewer-lkk.3","depends_on_id":"beads_viewer-lkk.2","type":"blocks","created_at":"2025-11-26T23:40:11.759405449Z","created_by":"daemon"}]}
{"id":"beads_viewer-lkk.4","content_hash":"720f16cb7fe55edad49c30a40b1d161c1cb62136353ff82450f5f94bc8cbdd0b","title":"Add TUI priority suggestion indicators","description":"Show â¬†ï¸/â¬‡ï¸ indicators when suggested priority differs from current. 'p' toggles visibility. Detail view shows full analysis.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:56.713559233Z","updated_at":"2025-11-27T01:03:21.300801986Z","closed_at":"2025-11-27T01:03:21.300801986Z","source_repo":".","labels":["tui","user-experience"],"dependencies":[{"issue_id":"beads_viewer-lkk.4","depends_on_id":"beads_viewer-lkk.2","type":"blocks","created_at":"2025-11-26T23:40:11.791287875Z","created_by":"daemon"}]}
{"id":"beads_viewer-m8k","content_hash":"334e63aadd2ad13e3bca464f81762239b2d3c9228338d32eca0c2e85045933c5","title":"Add pkg/hooks config and executor edge case tests","description":"pkg/hooks has 73.8% coverage - need to reach 90%+.\n\n## Current Gaps\n- Config file parsing edge cases not tested\n- Executor timeout handling not tested\n- Hook failure scenarios incomplete\n\n## Required Tests (NO MOCKS)\n\n### Config Parsing Tests\n- [ ] Empty hooks.yaml file\n- [ ] Malformed YAML syntax\n- [ ] Missing required fields\n- [ ] Invalid command paths\n- [ ] Environment variable expansion\n\n### Executor Tests\n- [ ] Pre-export hook success flow\n- [ ] Pre-export hook failure blocks export\n- [ ] Post-export hook success flow\n- [ ] Post-export hook failure logs but continues\n- [ ] Hook timeout handling\n- [ ] Hook with environment variables\n- [ ] Hook stdout/stderr capture\n- [ ] Multiple hooks in sequence\n\n### Edge Cases\n- [ ] Hook command not found\n- [ ] Hook command permission denied\n- [ ] Hook produces large output\n- [ ] Hook hangs (timeout test)\n- [ ] Hook modifies environment\n\n## Files\n- pkg/hooks/config.go\n- pkg/hooks/executor.go\n- pkg/hooks/executor_test.go (enhance)\n- pkg/hooks/config_test.go (create new)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T15:37:18.081718894Z","updated_at":"2025-11-30T15:37:18.081718894Z","source_repo":".","labels":["hooks","testing"]}
{"id":"beads_viewer-nmw","content_hash":"6d9b569b89ea2f6e919d0aff2aff5c2c97de1ac98646513461e1b6d92b067714","title":"Add pkg/loader/git.go advanced tests","description":"git.go handles git history operations but needs more edge case coverage.\n\n## Required Tests (NO MOCKS - use real git repos)\n\n### Git Repository Tests\nCreate temporary git repos for testing:\n```go\nfunc setupGitRepo(t *testing.T) string {\n    dir := t.TempDir()\n    run(t, dir, \"git\", \"init\")\n    run(t, dir, \"git\", \"config\", \"user.email\", \"test@test.com\")\n    run(t, dir, \"git\", \"config\", \"user.name\", \"Test\")\n    return dir\n}\n```\n\n### Revision Resolution Tests\n- [ ] HEAD resolves to current commit\n- [ ] HEAD~1 resolves to parent\n- [ ] Branch name resolves correctly\n- [ ] Tag name resolves correctly\n- [ ] Full SHA resolves correctly\n- [ ] Short SHA resolves correctly\n- [ ] Invalid ref returns error\n- [ ] Date-based ref (YYYY-MM-DD) works\n\n### LoadAt Tests\n- [ ] Load from current HEAD\n- [ ] Load from previous commit\n- [ ] Load from specific tag\n- [ ] Load when beads file didn't exist (empty result)\n- [ ] Load from commit with different file contents\n\n### Error Handling\n- [ ] Not a git repository\n- [ ] Ref doesn't exist\n- [ ] Beads file not tracked\n- [ ] Permission denied on .git\n\n### Complex Scenarios\n- [ ] Load across branch switches\n- [ ] Load with merge commits\n- [ ] Load with renamed files\n\n## Files\n- pkg/loader/git.go\n- pkg/loader/git_test.go (enhance)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T15:38:24.839725351Z","updated_at":"2025-11-30T15:38:24.839725351Z","source_repo":".","labels":["git","loader","testing"]}
{"id":"beads_viewer-oxm","content_hash":"67afd1b77ded151e0de527daace28a4a3f3a503d2b0c55a3392bd3b00ba25977","title":"Add detailed test logging infrastructure","description":"Tests currently have minimal logging, making failures hard to diagnose. Need structured, detailed logging throughout.\n\n## Current Problems\n- Test failures show minimal context\n- No timing information in test output\n- Hard to trace which step failed in complex tests\n- No structured format for CI parsing\n\n## Logging Infrastructure Needed\n\n### Test Logger Package\nCreate pkg/testutil/logger.go:\n```go\npackage testutil\n\ntype TestLogger struct {\n    t       *testing.T\n    name    string\n    started time.Time\n}\n\nfunc NewLogger(t *testing.T) *TestLogger {\n    return \u0026TestLogger{t: t, name: t.Name(), started: time.Now()}\n}\n\nfunc (l *TestLogger) Step(format string, args ...interface{}) {\n    elapsed := time.Since(l.started)\n    l.t.Logf(\"[%s +%v] %s\", l.name, elapsed, fmt.Sprintf(format, args...))\n}\n\nfunc (l *TestLogger) Input(name string, value interface{}) {\n    l.t.Logf(\"[%s] INPUT %s = %+v\", l.name, name, value)\n}\n\nfunc (l *TestLogger) Output(name string, value interface{}) {\n    l.t.Logf(\"[%s] OUTPUT %s = %+v\", l.name, name, value)\n}\n\nfunc (l *TestLogger) Error(err error) {\n    l.t.Logf(\"[%s] ERROR: %v\", l.name, err)\n}\n\nfunc (l *TestLogger) Duration() time.Duration {\n    return time.Since(l.started)\n}\n```\n\n### Assertion Helpers with Logging\n```go\nfunc AssertEqual(t *testing.T, log *TestLogger, name string, got, want interface{}) {\n    if got != want {\n        log.Error(fmt.Errorf(\"%s: got %v, want %v\", name, got, want))\n        t.Errorf(\"%s: got %v, want %v\", name, got, want)\n    } else {\n        log.Step(\"%s = %v (OK)\", name, got)\n    }\n}\n\nfunc AssertNoError(t *testing.T, log *TestLogger, op string, err error) {\n    if err != nil {\n        log.Error(fmt.Errorf(\"%s failed: %v\", op, err))\n        t.Fatalf(\"%s failed: %v\", op, err)\n    }\n    log.Step(\"%s succeeded\", op)\n}\n```\n\n### Usage Example\n```go\nfunc TestLoadIssues_LargeFile(t *testing.T) {\n    log := testutil.NewLogger(t)\n    \n    log.Step(\"Creating test directory\")\n    dir := t.TempDir()\n    \n    log.Step(\"Generating %d test issues\", 1000)\n    issues := generateIssues(1000)\n    log.Input(\"issue_count\", len(issues))\n    \n    log.Step(\"Writing JSONL file\")\n    writeJSONL(dir, issues)\n    \n    log.Step(\"Loading issues from file\")\n    loaded, err := LoadIssues(dir)\n    testutil.AssertNoError(t, log, \"LoadIssues\", err)\n    \n    log.Output(\"loaded_count\", len(loaded))\n    log.Step(\"Test completed in %v\", log.Duration())\n}\n```\n\n### CI-Friendly Output Format\nAdd structured output mode for CI:\n```go\n// When TEST_LOG_FORMAT=json\n{\"test\":\"TestLoadIssues\",\"step\":\"loading\",\"elapsed_ms\":42,\"status\":\"ok\"}\n{\"test\":\"TestLoadIssues\",\"step\":\"complete\",\"elapsed_ms\":156,\"assertions\":5,\"failures\":0}\n```\n\n## Required Changes\n\n### New Files\n- [ ] pkg/testutil/logger.go - Test logging utilities\n- [ ] pkg/testutil/assertions.go - Assertion helpers\n- [ ] pkg/testutil/fixtures.go - Test fixture helpers\n\n### Update Existing Tests\n- [ ] pkg/analysis/*_test.go - Add logging to complex tests\n- [ ] pkg/loader/*_test.go - Add logging to file operations\n- [ ] pkg/ui/*_test.go - Add logging to render tests\n- [ ] tests/e2e/*_test.go - Add detailed step logging\n\n## Acceptance Criteria\n- [ ] All test failures include timing and context\n- [ ] Complex tests have step-by-step logging\n- [ ] CI can parse structured test output\n- [ ] Test duration visible in logs\n- [ ] Input/output values logged for debugging","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-30T15:35:50.255710955Z","updated_at":"2025-11-30T15:35:50.255710955Z","source_repo":".","labels":["infrastructure","logging","testing"]}
{"id":"beads_viewer-qfr","content_hash":"711fb5debc900f45f20446792af4882403ab9740d3dcc99bdc8bc521577b212b","title":"Comprehensive Test Coverage Overhaul","description":"Achieve complete unit test coverage without mocks/fakes and comprehensive e2e integration tests with detailed logging across all packages.\n\n## Current State Analysis\n- **Overall Coverage**: ~75-85% across packages, but highly variable\n- **Critical Gaps**: \n  - pkg/ui at only 52.5% (model.go is 71KB with only 6 tests)\n  - pkg/model/types.go has 0% coverage\n  - E2E suite has only 2 basic tests\n- **Failing Tests**: 2 performance regression tests in pkg/analysis\n- **Missing**: Detailed test logging, CI coverage reporting\n\n## Goals\n1. **Unit Tests**: 90%+ coverage on all packages using real implementations (no mocks)\n2. **E2E Tests**: Comprehensive integration tests covering all CLI flags and workflows\n3. **Logging**: Detailed, structured logging in all tests for debugging\n4. **CI Integration**: Coverage reporting, thresholds, and badges\n\n## Philosophy\n- Test real behavior, not mocked behavior\n- Tests should be documentation of expected behavior\n- Failures should be immediately diagnosable from logs\n- Performance tests must have stable, meaningful baselines\n\n## Success Criteria\n- [ ] All packages â‰¥90% statement coverage (UI â‰¥85% acceptable)\n- [ ] Zero failing tests in CI\n- [ ] E2E tests cover all --robot-* flags\n- [ ] Test output includes timing, context, and clear failure messages\n- [ ] Coverage badge in README showing â‰¥85%","status":"open","priority":0,"issue_type":"epic","created_at":"2025-11-30T15:29:36.312582996Z","updated_at":"2025-11-30T15:29:36.312582996Z","source_repo":".","labels":["coverage","quality","testing"]}
{"id":"beads_viewer-qjc","content_hash":"0e0936cedf41a38ffbaa046a3510751123bc58d1bfb7be3f9d4b93b0743718c2","title":"Actionable Exports \u0026 Hooks System","description":"Enhance exports to include runnable commands and add a hook system for automation.\n\n## Background \u0026 Motivation\nCurrent exports are read-only reports. Users want exports that enable action: 'here's the command to close these resolved issues' or 'here's the PR description for this work'.\n\n## Value Proposition\n- For Humans: Exports include copy-paste ready commands\n- For AI Agents: Chain exports â†’ actions without manual parsing\n\n## Technical Approach\n1. Enhance markdown export with bd command snippets\n2. Add hook system (pre-export, post-export)\n3. Hook configuration in .bv/hooks.yaml\n4. Environment variables passed to hooks\n\n## Hook Use Cases\n- Post to Slack after export\n- Create GitHub issue from bead\n- Trigger CI pipeline\n- Sync to external tracker\n\n## Security Considerations\n- Hooks are opt-in (require explicit config)\n- Commands are not auto-executed\n- Hook output captured but not interpreted","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-26T23:36:37.178866162Z","updated_at":"2025-11-30T14:47:06.583669217Z","closed_at":"2025-11-30T14:47:06.583669217Z","source_repo":".","labels":["automation","export","hooks"]}
{"id":"beads_viewer-qjc.1","content_hash":"130744b0eeb0e3704855bc38688f4baaab984cb264f09c1ff8d691ec043b790f","title":"Add command snippets to markdown export","description":"Include ready-to-run bd commands in markdown exports.\n\n## Export Enhancement\nAdd 'Quick Actions' section to markdown export:\n\n### Quick Actions\n```bash\n# Close all resolved items in this export\nbd close issue-1 issue-2 issue-3\n\n# Bulk priority update\nbd update issue-4 issue-5 -p P1\n```\n\n## Per-Issue Actions\nEach issue card includes:\n- bd close \u003cid\u003e: Mark as done\n- bd comment \u003cid\u003e '\u003ctext\u003e': Add comment\n- bd update \u003cid\u003e -p \u003cpriority\u003e: Change priority\n\n## Implementation\n- Add CommandSnippets field to export.Options\n- Generate commands based on current state\n- Use proper escaping for shell safety\n\n## File Changes\n- pkg/export/markdown.go: Add command generation\n- pkg/export/markdown_test.go: Test command output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.899902692Z","updated_at":"2025-11-30T05:03:42.090649656Z","closed_at":"2025-11-30T05:03:42.090657856Z","source_repo":".","labels":["automation","export"]}
{"id":"beads_viewer-qjc.2","content_hash":"5a2bf79463fa5feab4652d16d44f9573b32520fb793d07ce204af7057330f988","title":"Design and implement hook configuration system","description":"Design and implement hook configuration system.\n\n## Configuration File\n.bv/hooks.yaml:\n```yaml\nhooks:\n  pre-export:\n    - name: validate-issues\n      command: './scripts/validate.sh'\n      timeout: 10s\n  post-export:\n    - name: slack-notify\n      command: 'curl -X POST ...'\n      timeout: 30s\n      env:\n        SLACK_WEBHOOK: ${SLACK_WEBHOOK}\n```\n\n## Environment Variables Passed to Hooks\n- BV_EXPORT_PATH: Output file path\n- BV_EXPORT_FORMAT: 'markdown' or 'json'\n- BV_ISSUE_COUNT: Number of issues exported\n- BV_TIMESTAMP: Export timestamp\n\n## Hook Execution\n- 30s default timeout, configurable per hook\n- Failures logged but don't break export (unless pre-export)\n- pre-export failure cancels export\n- Stdout/stderr captured and displayed\n\n## File Changes\n- pkg/hooks/config.go: Configuration types and loader\n- pkg/hooks/executor.go: Hook execution logic\n- pkg/hooks/executor_test.go: Tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.939948976Z","updated_at":"2025-11-30T07:39:47.503672594Z","closed_at":"2025-11-30T07:39:47.503672594Z","source_repo":".","labels":["configuration","hooks"]}
{"id":"beads_viewer-qjc.3","content_hash":"22d6bc5de63bd7ff43754154311e560124475fb3d707a7f14a4cbcb37b30eaf0","title":"Integrate hooks with export pipeline","description":"Wire hooks into export flow: load config â†’ pre-export â†’ generate â†’ write â†’ post-export. --no-hooks flag. Hook output displayed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.980899767Z","updated_at":"2025-11-30T14:44:21.658831195Z","closed_at":"2025-11-30T14:44:21.658831195Z","source_repo":".","labels":["export","hooks","integration"],"dependencies":[{"issue_id":"beads_viewer-qjc.3","depends_on_id":"beads_viewer-qjc.2","type":"blocks","created_at":"2025-11-26T23:40:38.920378322Z","created_by":"daemon"}]}
{"id":"beads_viewer-ub7","content_hash":"d09b7591f7fcec3bf7c40a0e6450ed628c543efd0829493fe81b2dd1fa986d00","title":"Topological Work-Plan Generator","description":"Leverage the existing DAG analysis to generate linearized, dependency-respecting work plans. This is the highest-value feature because it directly answers the question every developer and AI agent asks: 'What can I actually work on right now?'\n\n## Background \u0026 Motivation\nThe analysis package already computes TopologicalOrder via topo.Sort(). However, this raw ordering isn't directly actionable because:\n1. It includes closed issues\n2. It doesn't filter to 'leaf nodes' (tasks with no open blockers)\n3. It's not exposed via CLI for programmatic access\n\n## Value Proposition\n- For Humans: A 'Smart To-Do' view showing only actionable items eliminates cognitive overhead of scanning blocked tasks.\n- For AI Agents: --robot-plan enables autonomous workflows where agents can request a strictly ordered task list, preventing work on blocked items.\n\n## Technical Approach\n1. Add GetActionableIssues() to analysis package - returns issues where all blocking dependencies are closed\n2. Add GetExecutionPlan() - returns topologically sorted actionable items with parallel tracks identified\n3. CLI flag --robot-plan outputs JSON with execution order\n4. TUI view showing actionable items grouped by parallel tracks\n\n## Success Criteria\n- Agent can request plan and receive valid execution order\n- Plan respects all blocking dependencies\n- Parallel tracks (independent work streams) are identified\n- Zero actionable items shown when all open issues are blocked","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-26T23:35:42.137355284Z","updated_at":"2025-11-27T01:09:04.691007979Z","closed_at":"2025-11-27T01:09:04.691007979Z","source_repo":".","labels":["ai-agent","builds-on-existing","high-value"]}
{"id":"beads_viewer-ub7.1","content_hash":"5f147608c8108a6be1eca6df9f5f7a1b405e0dba247911c49dfd69b1c6f37928","title":"Add GetActionableIssues() to analysis package","description":"Identify issues that can be worked on immediately - those with no open blocking dependencies.\n\n## Algorithm\nfunc (a *Analyzer) GetActionableIssues() []model.Issue:\n  - Skip closed issues\n  - Skip issues with open blockers (only 'blocks' type creates hard deps)\n  - Missing blockers don't block (graceful degradation)\n\n## Key Design Decisions\n1. Only 'blocks' type creates hard dependencies - 'related' and 'parent-child' are informational\n2. Missing blockers don't block - Graceful degradation when referenced issue doesn't exist\n3. Closed issues are never actionable - They're done\n\n## File Changes\n- pkg/analysis/graph.go: Add methods to Analyzer struct\n- pkg/analysis/graph_test.go: Add comprehensive tests\n\n## Acceptance Criteria\n- [ ] Returns only open/in_progress/blocked issues\n- [ ] Correctly identifies issues with no open blockers\n- [ ] Handles missing dependency references gracefully\n- [ ] Handles cycles gracefully\n- [ ] Unit tests cover all edge cases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:33.191897508Z","updated_at":"2025-11-27T00:07:29.249293984Z","closed_at":"2025-11-27T00:07:29.249301284Z","source_repo":".","labels":["analysis","core-logic"]}
{"id":"beads_viewer-ub7.2","content_hash":"eeff2d5823a61b34d23e9d7d4569ef17e90ecef51f8346a76eeb51df875ffbd1","title":"Add GetExecutionPlan() with parallel track detection","description":"Generate a dependency-respecting execution plan with parallel tracks identified for concurrent work.\n\n## Data Structure\ntype ExecutionPlan struct {\n    Tracks []ExecutionTrack\n    Total  int\n}\n\ntype ExecutionTrack struct {\n    TrackID string\n    Items   []PlanItem\n    Reason  string  // Why these are grouped\n}\n\ntype PlanItem struct {\n    ID          string\n    Title       string\n    Priority    int\n    UnblocksIDs []string  // What becomes actionable when done\n}\n\n## Algorithm\n1. Get actionable issues from GetActionableIssues()\n2. Identify connected components among actionable issues\n3. Within each component, sort by priority then topological order\n4. For each item, compute what it unblocks\n\n## Considerations\n- Parallel Tracks: Independent subgraphs can be worked on concurrently\n- Unblocks Info: Helps prioritize - 'doing X unblocks 5 other tasks'\n- Priority Integration: Within tracks, respect explicit priority\n\n## File Changes\n- pkg/analysis/plan.go: New file with plan generation logic\n- pkg/analysis/plan_test.go: Tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:45.642860966Z","updated_at":"2025-11-27T00:10:27.135375792Z","closed_at":"2025-11-27T00:10:27.135386592Z","source_repo":".","labels":["analysis","core-logic"],"dependencies":[{"issue_id":"beads_viewer-ub7.2","depends_on_id":"beads_viewer-ub7.1","type":"blocks","created_at":"2025-11-26T23:38:34.543909796Z","created_by":"daemon"}]}
{"id":"beads_viewer-ub7.3","content_hash":"4050c76be316987c70c2b54de264a94183f2ce3b2f3705a1ec284950dbeb8393","title":"Add --robot-plan CLI flag","description":"Expose execution plan via CLI for AI agents and scripts.\n\n## Flag Definition\nrobotPlan := flag.Bool('robot-plan', false, 'Output dependency-respecting execution plan as JSON')\n\n## Output Format\n{\n  'generated_at': '2025-11-26T20:00:00Z',\n  'tracks': [{\n    'track_id': 'track-1',\n    'items': [{\n      'id': 'issue-123',\n      'title': 'Implement feature X',\n      'priority': 1,\n      'unblocks': ['issue-456', 'issue-789']\n    }],\n    'reason': 'Independent work stream focused on auth module'\n  }],\n  'total_actionable': 5,\n  'total_blocked': 12,\n  'summary': {\n    'highest_impact': 'issue-123',\n    'impact_reason': 'Unblocks 3 high-priority tasks'\n  }\n}\n\n## Usage Examples\nbv --robot-plan  # Get full plan\nbv --robot-plan | jq '.tracks[0].items[0]'  # First actionable item\n\n## File Changes\n- cmd/bv/main.go: Add flag parsing and output logic\n\n## Acceptance Criteria\n- [ ] --robot-plan outputs valid JSON\n- [ ] Exit code 0 on success, non-zero on error\n- [ ] Errors go to stderr, plan to stdout\n- [ ] Works with existing filters","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:58.626513035Z","updated_at":"2025-11-27T00:12:56.417898302Z","closed_at":"2025-11-27T00:12:56.417898302Z","source_repo":".","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"beads_viewer-ub7.3","depends_on_id":"beads_viewer-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.584911759Z","created_by":"daemon"}]}
{"id":"beads_viewer-ub7.4","content_hash":"5d158966dfd46f70600998c150e39b145f0a05d525e2b95fa9bf3608e179d318","title":"Add TUI Actionable view with 'a' keybinding","description":"Provide a focused view showing only items that can be worked on immediately.\n\n## Keybinding\n'a' - Toggle Actionable view (similar to 'b' for board, 'g' for graph)\n\n## View Design\nâ”Œâ”€ ACTIONABLE (5 items) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Track 1: Auth Module                          â”‚\nâ”‚ â”œâ”€ ðŸ”¥ P0 AUTH-123 Fix login timeout          â”‚\nâ”‚ â”‚      â””â”€ Unblocks: AUTH-456, AUTH-789        â”‚\nâ”‚ â””â”€ âš¡ P1 AUTH-124 Add OAuth support          â”‚\nâ”‚                                               â”‚\nâ”‚ Track 2: API Layer                            â”‚\nâ”‚ â””â”€ ðŸ”¹ P2 API-001 Refactor endpoints          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n## Features\n- Group by track (parallel work streams)\n- Show unblocks count for each item\n- Priority indicators\n- Navigation: j/k for up/down, enter for details\n\n## File Changes\n- pkg/ui/actionable.go: New view component\n- pkg/ui/actionable_test.go: Tests\n- pkg/ui/model.go: Add keybinding and state\n\n## Acceptance Criteria\n- [ ] 'a' key toggles actionable view\n- [ ] Shows items grouped by independent tracks\n- [ ] Displays unblock counts\n- [ ] Navigation works correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:38:12.680418277Z","updated_at":"2025-11-27T01:00:29.340952874Z","closed_at":"2025-11-27T01:00:29.340952874Z","source_repo":".","labels":["tui","user-experience"],"dependencies":[{"issue_id":"beads_viewer-ub7.4","depends_on_id":"beads_viewer-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.615282328Z","created_by":"daemon"}]}
{"id":"beads_viewer-ub7.5","content_hash":"4203edfb0552783d381855dbcdea540fdbf69215ca0977d47769bdb8ced46191","title":"Add comprehensive tests for work plan generation","description":"Ensure work plan generation is correct and handles edge cases.\n\n## Test Cases\n\n### Happy Path\n- [ ] Simple chain: A blocks B blocks C â†’ only C is actionable\n- [ ] Parallel chains: Aâ†’B, Câ†’D â†’ B and D actionable in separate tracks\n- [ ] Mixed: Some actionable, some blocked\n\n### Edge Cases\n- [ ] Empty issue list â†’ empty plan\n- [ ] All issues closed â†’ empty plan\n- [ ] All issues blocked by cycles â†’ plan may include cycle members\n- [ ] Single issue with no deps â†’ one track, one item\n- [ ] Deeply nested chain â†’ correct single actionable leaf\n\n### Dependency Edge Cases\n- [ ] Missing blocker reference â†’ doesn't block\n- [ ] 'related' type deps â†’ don't create blocking\n- [ ] Self-referential dep â†’ handled gracefully\n- [ ] Issue blocks itself via chain â†’ cycle detection\n\n### Integration Tests\n- [ ] --robot-plan produces valid JSON\n- [ ] Plan respects status filters\n- [ ] Plan updates when issues change\n\n## File Changes\n- pkg/analysis/plan_test.go: Comprehensive unit tests\n- test/e2e/plan_test.go: End-to-end CLI tests\n\n## Acceptance Criteria\n- [ ] 90%+ code coverage on plan generation\n- [ ] All edge cases documented and tested\n- [ ] CI passes with new tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:38:28.191119317Z","updated_at":"2025-11-27T01:08:41.684453391Z","closed_at":"2025-11-27T01:08:41.684453391Z","source_repo":".","labels":["quality","testing"],"dependencies":[{"issue_id":"beads_viewer-ub7.5","depends_on_id":"beads_viewer-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.64136186Z","created_by":"daemon"}]}
{"id":"beads_viewer-ufd","content_hash":"0b8ddc11acec6ac00021ebeddaff93973a2d35666b6db752833b705e8912718e","title":"Context Packs \u0026 Recipes System","description":"Implement named workflow presets ('recipes') that bundle filters, layouts, and exports into one-command operations. This dramatically simplifies common workflows for both humans and AI agents.\n\n## Background \u0026 Motivation\nUsers repeatedly perform the same sequences: 'Show me blocked high-priority items' or 'Export a release changelog'. Currently this requires remembering multiple flags. Recipes encode these patterns.\n\n## Value Proposition\n- For Humans: 'bv --recipe triage' replaces 'bv --status open,blocked --priority 0,1 --sort priority'\n- For AI Agents: Recipes provide semantic entry points - 'triage mode' vs 'release mode' vs 'dependency analysis mode'\n\n## Technical Approach\n1. Define recipe schema (YAML)\n2. Embed sensible default recipes\n3. Allow user-defined recipes in .bv/recipes.yaml\n4. CLI: bv --recipe \u003cname\u003e or bv -r \u003cname\u003e\n5. TUI: Recipe picker with descriptions\n\n## Built-in Recipes\n- triage: Open/blocked issues, sorted by priority\n- release-cut: Recently closed issues for changelog\n- blocked-review: All blocked items with blocker info\n- dependency-risk: High betweenness/PageRank items\n- quick-wins: Low-priority, no-dependency items\n- stale: Items not updated in 14+ days","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:35:57.447095883Z","updated_at":"2025-11-27T01:15:09.04831944Z","closed_at":"2025-11-27T01:15:09.04831944Z","source_repo":".","labels":["ai-agent","developer-experience","workflow"]}
{"id":"beads_viewer-ufd.1","content_hash":"91a6052b780425f6631a54321744fa6f8bd8f851cd0f7112a5e9edb74e7d98f3","title":"Define recipe schema and configuration structure","description":"Design the YAML schema for recipe definitions that is both human-writable and machine-parseable.\n\n## Schema Design\nrecipes:\n  triage:\n    description: 'Focus on urgent open/blocked items'\n    filters:\n      status: [open, blocked]\n      priority_max: 2\n    sort:\n      by: priority\n      direction: asc\n    view: board\n    export: null\n\n## Schema Fields\n- description: Human-readable explanation\n- filters: Issue filtering criteria\n- sort: Sort order\n- view: Which view to activate\n- export: Optional auto-export configuration\n- metrics: Optional metric-based filtering\n\n## File Changes\n- pkg/recipe/types.go: Schema types\n- pkg/recipe/schema.go: Validation logic\n\n## Acceptance Criteria\n- [ ] Schema supports all current filter options\n- [ ] Relative time expressions work (14d, 1w, etc.)\n- [ ] Validation catches invalid recipes at load time","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:38:47.790000865Z","updated_at":"2025-11-27T00:16:11.899416433Z","closed_at":"2025-11-27T00:16:11.899416433Z","source_repo":".","labels":["configuration","design"]}
{"id":"beads_viewer-ufd.2","content_hash":"8d6b65e6fcc0b37f55930f0270ca1f96488924ffd021d3a5c51a0d212396fdb2","title":"Implement recipe loader with embedded defaults","description":"Load recipes from embedded defaults and user configuration, with proper merging.\n\n## Loading Order (later overrides earlier)\n1. Embedded defaults (compiled into binary)\n2. User config at ~/.config/bv/recipes.yaml (global)\n3. Project config at .bv/recipes.yaml (local)\n\n## Embedded Defaults\nUse Go embed to include default recipes:\n//go:embed defaults/recipes.yaml\nvar defaultRecipes []byte\n\n## Merge Strategy\n- User recipes with same name override defaults completely\n- User can disable a default recipe: triage: null\n- Unknown keys in user config generate warnings\n\n## Discovery Endpoint\nfunc (l *Loader) ListRecipes() []RecipeSummary\nEnables --robot-recipes for AI agent discovery.\n\n## File Changes\n- pkg/recipe/loader.go: Loading and merging logic\n- pkg/recipe/defaults/recipes.yaml: Embedded defaults\n- pkg/recipe/loader_test.go: Tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:38:59.945581598Z","updated_at":"2025-11-27T00:18:56.165622013Z","closed_at":"2025-11-27T00:18:56.165622013Z","source_repo":".","labels":["configuration","core-logic"],"dependencies":[{"issue_id":"beads_viewer-ufd.2","depends_on_id":"beads_viewer-ufd.1","type":"blocks","created_at":"2025-11-26T23:39:43.048093687Z","created_by":"daemon"}]}
{"id":"beads_viewer-ufd.3","content_hash":"25e1bf12d1123421fe045d756949c5c792ea6c8f07354ca68cc38fc505f6ba72","title":"Create built-in recipe library","description":"Provide a curated set of immediately useful recipes.\n\n## Recipes to Implement\n\n### 1. triage\ndescription: Urgent items needing attention\nfilters: status=[open,blocked], priority_max=2\nview: board\n\n### 2. release-cut\ndescription: Recently closed items for changelog\nfilters: status=[closed], updated_since=14d\nview: list\n\n### 3. blocked-review\ndescription: All blocked items with blocker info\nfilters: status=[blocked]\nview: list, show_blockers=true\n\n### 4. dependency-risk\ndescription: High-impact bottleneck nodes\nfilters: status=[open,in_progress]\nview: insights, insights_panel=bottlenecks\n\n### 5. quick-wins\ndescription: Easy items with no blockers\nfilters: status=[open], has_blockers=false\nview: list\n\n### 6. stale\ndescription: Items not updated in 14+ days\nfilters: status=[open,in_progress], updated_before=14d\nview: list\n\n### 7. my-work\ndescription: Items assigned to current user\nfilters: assignee=$USER\nview: board\n\n## File Changes\n- pkg/recipe/defaults/recipes.yaml","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:12.742325056Z","updated_at":"2025-11-27T00:19:54.792566939Z","closed_at":"2025-11-27T00:19:54.792566939Z","source_repo":".","labels":["content","defaults"],"dependencies":[{"issue_id":"beads_viewer-ufd.3","depends_on_id":"beads_viewer-ufd.1","type":"blocks","created_at":"2025-11-26T23:39:43.088545016Z","created_by":"daemon"}]}
{"id":"beads_viewer-ufd.4","content_hash":"9673881bd3eb0a1741e18fe11b881f4052ffc0ada72c813657dea37bae9919e1","title":"Add --recipe CLI flag and --robot-recipes discovery","description":"Expose recipes via command-line interface.\n\n## Flags\n--recipe NAME or -r NAME: Apply named recipe\n--robot-recipes: List available recipes as JSON\n\n## --robot-recipes Output\n{\n  'recipes': [\n    {'name': 'triage', 'description': 'Urgent items needing attention', 'source': 'builtin'},\n    {'name': 'my-custom', 'description': 'Custom team workflow', 'source': 'project'}\n  ]\n}\n\n## Recipe Application\nWhen --recipe triage is used:\n1. Load recipe definition\n2. Apply filters to issue list\n3. Apply sort order\n4. Set initial view mode\n5. If export specified, run export and exit\n\n## Error Handling\n- Unknown recipe name: list available recipes and exit 1\n- Invalid recipe config: show validation error\n\n## File Changes\n- cmd/bv/main.go: Flag parsing and recipe application\n\n## Acceptance Criteria\n- [ ] --recipe triage applies triage recipe\n- [ ] -r triage shorthand works\n- [ ] --robot-recipes lists all available recipes\n- [ ] Unknown recipe shows helpful error","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:25.159178017Z","updated_at":"2025-11-27T00:55:35.009664218Z","closed_at":"2025-11-27T00:55:35.009664218Z","source_repo":".","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"beads_viewer-ufd.4","depends_on_id":"beads_viewer-ufd.2","type":"blocks","created_at":"2025-11-26T23:39:43.115461602Z","created_by":"daemon"}]}
{"id":"beads_viewer-ufd.5","content_hash":"950c0fbd2ff8629640ba5dc3e4828306cb78c5557598408969bf88a2207f1f57","title":"Add TUI recipe picker overlay","description":"Allow users to browse and apply recipes from within the TUI.\n\n## Keybinding\n'R' (shift-r) - Open recipe picker overlay\n\n## Overlay Design\nâ”Œâ”€ Select Recipe â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  \u003e triage                                   â”‚\nâ”‚    Urgent items needing attention           â”‚\nâ”‚                                             â”‚\nâ”‚    release-cut                              â”‚\nâ”‚    Recently closed items for changelog      â”‚\nâ”‚                                             â”‚\nâ”‚ j/k: navigate â€¢ enter: apply â€¢ esc: cancel  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n## Interaction\n- j/k or up/down to navigate\n- enter to apply selected recipe\n- esc to cancel\n- Applying recipe changes filters, sort, and view\n\n## Footer Update\nWhen recipe is active, show: 'Recipe: triage | ...'\n\n## File Changes\n- pkg/ui/recipe_picker.go: Picker component\n- pkg/ui/model.go: Add keybinding and state","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:37.456844031Z","updated_at":"2025-11-27T01:14:53.400273324Z","closed_at":"2025-11-27T01:14:53.400273324Z","source_repo":".","labels":["tui","user-experience"],"dependencies":[{"issue_id":"beads_viewer-ufd.5","depends_on_id":"beads_viewer-ufd.2","type":"blocks","created_at":"2025-11-26T23:39:43.16503446Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t","content_hash":"ae483964fc8ede2a9398734ee3532d7ff056733c01ee3f0b12954ac0509f64ae","title":"Graph Analysis Performance Optimization","description":"## Executive Summary\n\nComprehensive performance optimization of bv's graph analysis engine to eliminate slow startup times caused by expensive graph algorithms.\n\n## Root Cause Analysis (VERIFIED BY TESTING)\n\nPerformance profiling revealed TWO critical bottlenecks:\n\n### 1. Betweenness Centrality - O(VÃ—E), NO TIMEOUT\n| Nodes | Edges | Time |\n|-------|-------|------|\n| 1000 | 5000 | 1.27s |\n| 2000 | 10000 | 4.62s |\n\nBrandes' algorithm scales quadratically. For large graphs, this dominates startup time.\n\n### 2. DirectedCyclesIn - EXPONENTIAL, 500ms timeout insufficient\n| Graph Type | Nodes | Result |\n|------------|-------|--------|\n| Many overlapping cycles | 30 | TIMEOUT 60s+ |\n| Complete graph | 20 | TIMEOUT 60s+ |\n\nJohnson's algorithm enumerates ALL elementary cycles. A complete graph with n nodes has O((n-1)!) cycles. For n=20, that's 19! â‰ˆ 10^17 cycles!\n\n### Other Algorithms (Fast, Not Issues)\n- PageRank: 36ms for 1000 nodes\n- HITS: 7ms for 1000 nodes  \n- TopoSort: 3ms for 1000 nodes\n\n## Optimization Strategy\n\n1. **Add timeouts to ALL expensive algorithms** (Betweenness, PageRank)\n2. **Lazy/async computation** - Don't block startup with expensive metrics\n3. **Progressive disclosure** - Compute basic metrics first, expensive ones in background\n4. **Size-based skipping** - Skip betweenness for graphs \u003e threshold\n5. **Approximation algorithms** - Sampling-based betweenness for large graphs\n6. **Caching** - Cache results, only recompute on data change\n7. **Parallel computation** - Where gonum supports it\n\n## Success Criteria\n\n- Startup time \u003c 200ms for 1000-node graphs\n- Startup time \u003c 500ms for 5000-node graphs  \n- No algorithm blocks startup for \u003e 500ms\n- Pathological graphs (many cycles) don't hang\n- Metrics remain accurate (or clearly marked as approximate)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-29T20:43:26.067756191Z","updated_at":"2025-11-30T07:30:26.049919473Z","closed_at":"2025-11-30T07:30:26.049919473Z","source_repo":".","labels":["critical","graph-analysis","performance"]}
{"id":"beads_viewer-w7t.1","content_hash":"4ea6f652b6de12598c4084cf129ab63c860ec035213613bf4417cb930307c51b","title":"Add timeout protection to Betweenness centrality","description":"## Problem\n\nBetweenness centrality (Brandes' algorithm) has NO timeout protection. For large graphs:\n- 1000 nodes, 5000 edges: 1.27 seconds\n- 2000 nodes, 10000 edges: 4.62 seconds\n\nThis blocks startup completely.\n\n## Solution\n\nAdd timeout wrapper similar to HITS and DirectedCyclesIn:\n\n```go\n// In Analyze()\ntype bwResult struct {\n    data map[int64]float64\n}\nbwDone := make(chan bwResult, 1)\ngo func() {\n    bwDone \u003c- bwResult{data: network.Betweenness(a.g)}\n}()\n\nselect {\ncase result := \u003c-bwDone:\n    for id, score := range result.data {\n        stats.Betweenness[a.nodeToID[id]] = score\n    }\ncase \u003c-time.After(500 * time.Millisecond):\n    // Betweenness timed out - skip this metric\n    // Could log warning or set a flag\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Betweenness computation wrapped with 500ms timeout\n- [ ] Timeout triggers graceful skip (empty betweenness map)\n- [ ] Log message indicates timeout occurred\n- [ ] Existing tests pass\n- [ ] Add test for timeout behavior\n\n## Files to Modify\n\n- pkg/analysis/graph.go: Add timeout wrapper around Betweenness call","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-29T20:43:41.833260598Z","updated_at":"2025-11-29T23:17:27.099141679Z","closed_at":"2025-11-29T23:17:27.099141679Z","source_repo":".","labels":["critical","performance","quick-win"]}
{"id":"beads_viewer-w7t.10","content_hash":"4e59f5c3192633bc8a0d32cb2fd0a0ff11c946812a444ecfcdf02fe841700dcc","title":"Add --profile-startup CLI flag for diagnostics","description":"## Purpose\n\nAdd a diagnostic flag that outputs detailed timing information for startup, helping users diagnose slow startup on their specific data.\n\n## Usage\n\n```bash\nbv --profile-startup\n\n# Output:\nStartup Profile for /path/to/.beads/beads.jsonl\n================================================\nData: 847 issues, 2341 dependencies, density=0.003\n\nPhase 1 (blocking):\n  Load JSONL:      23ms\n  Build graph:     12ms\n  Degree:           3ms\n  TopoSort:         5ms\n  Total Phase 1:   43ms\n\nPhase 2 (async):\n  PageRank:        45ms\n  Betweenness:    312ms (timeout at 500ms: NO)\n  Eigenvector:     28ms\n  HITS:            19ms\n  Cycles:          67ms (found: 3)\n  Critical Path:   11ms\n  Total Phase 2:  482ms\n\nTotal startup:    525ms\n\nRecommendations:\n  âœ“ Startup within acceptable range (\u003c1s)\n  âš  Betweenness taking 60% of Phase 2 time\n    Consider: --skip-betweenness for faster startup\n```\n\n## Implementation\n\n```go\ntype StartupProfile struct {\n    LoadJSONL     time.Duration\n    BuildGraph    time.Duration\n    Degree        time.Duration\n    TopoSort      time.Duration\n    PageRank      time.Duration\n    Betweenness   time.Duration\n    BetweennessTO bool // Timed out?\n    Eigenvector   time.Duration\n    HITS          time.Duration\n    HITSTO        bool\n    Cycles        time.Duration\n    CyclesTO      bool\n    CycleCount    int\n    CriticalPath  time.Duration\n}\n\nfunc (a *Analyzer) AnalyzeWithProfile() (*GraphStats, *StartupProfile)\n```\n\n## Acceptance Criteria\n\n- [ ] --profile-startup flag outputs timing breakdown\n- [ ] Shows which algorithms timed out\n- [ ] Provides recommendations based on data\n- [ ] JSON output option (--profile-startup --json)\n- [ ] Useful for bug reports\n\n## Files to Modify\n\n- cmd/bv/main.go: Add flag\n- pkg/analysis/graph.go: Add profiled analysis mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T20:46:42.492702373Z","updated_at":"2025-11-30T04:00:11.689888392Z","closed_at":"2025-11-30T04:00:11.689920992Z","source_repo":".","labels":["developer-experience","diagnostics"],"dependencies":[{"issue_id":"beads_viewer-w7t.10","depends_on_id":"beads_viewer-w7t.5","type":"blocks","created_at":"2025-11-29T20:46:42.49742721Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.11","content_hash":"929262ebd699a93d4f8e4e11021c22dbdcf1cb771755326ab4ae0973dedfc59c","title":"Document performance characteristics and tuning guide","description":"## Purpose\n\nDocument the performance characteristics of bv's graph analysis so users understand:\n1. What affects startup time\n2. How to diagnose slow startup\n3. Available tuning options\n\n## Documentation Sections\n\n### 1. Performance Characteristics\n\n```markdown\n## Graph Analysis Performance\n\nbv computes 9 graph-theoretic metrics. Their complexity:\n\n| Metric | Complexity | 100 nodes | 1000 nodes |\n|--------|-----------|-----------|------------|\n| Degree | O(V) | \u003c1ms | \u003c5ms |\n| TopoSort | O(V+E) | \u003c1ms | \u003c5ms |\n| PageRank | O(iterÃ—E) | \u003c5ms | ~40ms |\n| Eigenvector | O(iterÃ—E) | \u003c5ms | ~30ms |\n| HITS | O(iterÃ—E) | \u003c5ms | ~10ms |\n| Critical Path | O(V+E) | \u003c1ms | \u003c5ms |\n| Betweenness | O(VÃ—E) | ~10ms | ~1.3s |\n| Cycles | O((V+E)Ã—C) | varies | varies |\n```\n\n### 2. Factors Affecting Performance\n\n```markdown\n### Graph Size\n- Linear algorithms scale with V+E\n- Betweenness scales with VÃ—E (quadratic)\n- Cycle detection is exponential in cycle count\n\n### Graph Density\n- Dense graphs (many edges per node) are slower\n- density = E / (VÃ—(V-1))\n- Healthy: \u003c0.05, Warning: \u003e0.15\n\n### Cycles\n- Graphs with many overlapping cycles can be pathological\n- Cycle detection may timeout\n```\n\n### 3. Tuning Options\n\n```markdown\n## CLI Flags for Performance\n\n--no-betweenness      Skip betweenness (fastest startup)\n--no-cycles           Skip cycle detection\n--fast                Skip all expensive metrics\n--profile-startup     Show timing breakdown\n--async-metrics       Use async Phase 2 (default)\n--sync-metrics        Force synchronous computation\n\n## Configuration\n\n.bv/config.yaml:\nanalysis:\n  betweenness_timeout_ms: 500\n  cycles_timeout_ms: 500\n  max_cycles: 100\n  skip_betweenness_above: 2000  # nodes\n```\n\n### 4. Troubleshooting\n\n```markdown\n## Slow Startup Troubleshooting\n\n1. Run with --profile-startup to identify bottleneck\n2. Check graph size: bv --robot-insights | jq .stats\n3. Check for cycles: bv --robot-insights | jq .cycles\n4. Try --fast flag to confirm it's analysis time\n5. Report issue with --profile-startup output\n```\n\n## Acceptance Criteria\n\n- [ ] README updated with performance section\n- [ ] Tuning guide in docs/\n- [ ] --help mentions performance flags\n- [ ] AGENTS.md mentions performance for AI agents\n\n## Files to Modify\n\n- README.md\n- docs/performance.md (new)\n- cmd/bv/main.go (--help text)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T20:47:06.915320453Z","updated_at":"2025-11-30T07:05:31.921790008Z","closed_at":"2025-11-30T07:05:31.921790008Z","source_repo":".","labels":["documentation"],"dependencies":[{"issue_id":"beads_viewer-w7t.11","depends_on_id":"beads_viewer-w7t.4","type":"blocks","created_at":"2025-11-29T20:47:06.920532592Z","created_by":"daemon"},{"issue_id":"beads_viewer-w7t.11","depends_on_id":"beads_viewer-w7t.7","type":"blocks","created_at":"2025-11-29T20:47:06.92283391Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.2","content_hash":"a4184c458002fbefbf42fc02dc6d6438307007da4f1fda9402096ae8838f2b1c","title":"Add timeout protection to PageRank","description":"## Problem\n\nPageRank has NO timeout. While normally fast (36ms for 1000 nodes), certain graph topologies could cause slow convergence.\n\n## Solution\n\nAdd defensive timeout wrapper:\n\n```go\ntype prResult struct {\n    data map[int64]float64\n}\nprDone := make(chan prResult, 1)\ngo func() {\n    prDone \u003c- prResult{data: network.PageRank(a.g, 0.85, 1e-6)}\n}()\n\nselect {\ncase result := \u003c-prDone:\n    for id, score := range result.data {\n        stats.PageRank[a.nodeToID[id]] = score\n    }\ncase \u003c-time.After(500 * time.Millisecond):\n    // PageRank timed out - use uniform distribution fallback\n    uniform := 1.0 / float64(len(a.issueMap))\n    for id := range a.issueMap {\n        stats.PageRank[id] = uniform\n    }\n}\n```\n\n## Acceptance Criteria\n\n- [ ] PageRank wrapped with 500ms timeout\n- [ ] Timeout uses uniform distribution fallback\n- [ ] Tests pass\n\n## Files to Modify\n\n- pkg/analysis/graph.go","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T20:43:51.600246085Z","updated_at":"2025-11-29T23:17:28.647834254Z","closed_at":"2025-11-29T23:17:28.647834254Z","source_repo":".","labels":["performance","quick-win"]}
{"id":"beads_viewer-w7t.3","content_hash":"c76eb7cf75f658620fae903c26f51797e36657b659c663ee5110730b0c4fd482","title":"Implement early-exit cycle detection for pathological graphs","description":"## Problem\n\nDirectedCyclesIn uses Johnson's algorithm which enumerates ALL elementary cycles. This is exponential:\n- 30 nodes with overlapping cycles: \u003e60 seconds (TIMEOUT)\n- 20 node complete graph: \u003e60 seconds (TIMEOUT)\n- A complete graph with n nodes has O((n-1)!) cycles\n\nThe current 500ms timeout helps but:\n1. Memory can explode before timeout (storing cycle list)\n2. We only need to KNOW cycles exist, not enumerate ALL\n\n## Solution\n\nImplement a smarter cycle detection strategy:\n\n```go\nfunc (a *Analyzer) detectCyclesWithLimit(maxCycles int, timeout time.Duration) [][]string {\n    // First: Quick SCC check (O(V+E)) - if no SCC \u003e 1 node, no cycles\n    sccs := topo.TarjanSCC(a.g)\n    hasCycles := false\n    for _, scc := range sccs {\n        if len(scc) \u003e 1 {\n            hasCycles = true\n            break\n        }\n    }\n    if !hasCycles {\n        return nil // No cycles - fast path\n    }\n    \n    // Has cycles - enumerate with limit\n    done := make(chan [][]graph.Node, 1)\n    ctx, cancel := context.WithTimeout(context.Background(), timeout)\n    defer cancel()\n    \n    go func() {\n        var cycles [][]graph.Node\n        // Use modified Johnson's that stops after maxCycles\n        // OR use the existing one but with timeout\n        done \u003c- topo.DirectedCyclesIn(a.g)\n    }()\n    \n    select {\n    case result := \u003c-done:\n        // Limit to maxCycles to prevent memory explosion\n        if len(result) \u003e maxCycles {\n            result = result[:maxCycles]\n        }\n        // Convert to string IDs...\n    case \u003c-ctx.Done():\n        return [][]string{{\"CYCLE_DETECTION_TIMEOUT\"}}\n    }\n}\n```\n\n## Key Optimizations\n\n1. **SCC pre-check**: Tarjan's SCC is O(V+E). If no SCC has \u003e1 node, graph is acyclic.\n2. **Limit stored cycles**: Cap at 100 cycles to prevent memory explosion\n3. **Existing timeout**: Keep the 500ms timeout\n4. **Informative result**: If timeout, return marker indicating cycles exist but weren't fully enumerated\n\n## Acceptance Criteria\n\n- [ ] SCC pre-check avoids expensive enumeration for acyclic graphs\n- [ ] Cycle count limited to prevent memory explosion\n- [ ] Timeout still enforced\n- [ ] Clear indication when cycles truncated\n- [ ] Test with pathological graph (30 nodes, many cycles)\n\n## Files to Modify\n\n- pkg/analysis/graph.go","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-29T20:44:12.048485663Z","updated_at":"2025-11-29T21:53:30.012166875Z","closed_at":"2025-11-29T21:53:30.012166875Z","source_repo":".","labels":["critical","performance"]}
{"id":"beads_viewer-w7t.4","content_hash":"b19cb4e0108cc7121cabeb84121ac29cfdc59970b5330f18b4022b410bf9e813","title":"Implement lazy/async metric computation","description":"## Problem\n\nCurrently ALL metrics are computed synchronously on startup. Even with timeouts, we pay the cost of:\n- Degree centrality (fast)\n- PageRank (medium)\n- Betweenness (slow)\n- Eigenvector (medium)\n- HITS (medium)\n- Cycles (potentially slow)\n- TopoSort (fast)\n- Critical Path (fast)\n\n## Solution: Two-Phase Computation\n\n### Phase 1: Instant (\u003c 50ms)\nCompute only what's needed for initial render:\n- Degree centrality (used for blocking indicators)\n- TopologicalSort (used for execution order)\n- Basic stats (counts, density)\n\n### Phase 2: Background (async)\nCompute expensive metrics in background goroutine:\n- PageRank\n- Betweenness\n- Eigenvector\n- HITS\n- Cycles\n- Critical Path\n\n### Implementation\n\n```go\ntype GraphStats struct {\n    // Phase 1 - always available immediately\n    OutDegree         map[string]int\n    InDegree          map[string]int\n    TopologicalOrder  []string\n    Density           float64\n    \n    // Phase 2 - computed async, may be nil initially\n    PageRank          map[string]float64\n    Betweenness       map[string]float64\n    Eigenvector       map[string]float64\n    Hubs              map[string]float64\n    Authorities       map[string]float64\n    CriticalPathScore map[string]float64\n    Cycles            [][]string\n    \n    // Status\n    Phase2Ready       bool\n    Phase2Error       error\n}\n\nfunc (a *Analyzer) AnalyzeAsync() (*GraphStats, \u003c-chan struct{}) {\n    stats := a.analyzePhase1()  // Instant\n    \n    done := make(chan struct{})\n    go func() {\n        defer close(done)\n        a.analyzePhase2(stats)  // Background\n        stats.Phase2Ready = true\n    }()\n    \n    return stats, done\n}\n```\n\n### TUI Integration\n\n```go\n// In Model\ntype Model struct {\n    stats         *analysis.GraphStats\n    statsReady    \u003c-chan struct{}\n    statsComplete bool\n}\n\n// In Update\ncase StatsReadyMsg:\n    m.statsComplete = true\n    // Trigger re-render to show new metrics\n```\n\n## Acceptance Criteria\n\n- [ ] Phase 1 metrics available within 50ms\n- [ ] Phase 2 computed in background\n- [ ] TUI renders immediately with Phase 1 data\n- [ ] TUI updates when Phase 2 completes\n- [ ] Insights dashboard shows \"Computing...\" for unavailable metrics\n- [ ] Existing functionality preserved\n\n## Files to Modify\n\n- pkg/analysis/graph.go: Split Analyze into phases\n- pkg/ui/model.go: Handle async stats\n- pkg/ui/insights.go: Show loading state for unavailable metrics","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T20:44:34.443722862Z","updated_at":"2025-11-30T03:51:32.893276833Z","closed_at":"2025-11-30T03:51:32.893294433Z","source_repo":".","labels":["architecture","performance"],"dependencies":[{"issue_id":"beads_viewer-w7t.4","depends_on_id":"beads_viewer-w7t.1","type":"blocks","created_at":"2025-11-29T20:44:34.447124287Z","created_by":"daemon"},{"issue_id":"beads_viewer-w7t.4","depends_on_id":"beads_viewer-w7t.2","type":"blocks","created_at":"2025-11-29T20:44:34.448421396Z","created_by":"daemon"},{"issue_id":"beads_viewer-w7t.4","depends_on_id":"beads_viewer-w7t.3","type":"blocks","created_at":"2025-11-29T20:44:34.449829906Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.5","content_hash":"e8e99383488981209588b045ccf58e3e8fb02009865a2fea8868aeb24b9ec0a0","title":"Create comprehensive benchmark test suite","description":"## Purpose\n\nCreate a benchmark suite to:\n1. Measure baseline performance\n2. Validate optimizations\n3. Catch performance regressions\n4. Test edge cases (pathological graphs)\n\n## Benchmark Categories\n\n### 1. Individual Algorithm Benchmarks\n```go\nfunc BenchmarkPageRank100(b *testing.B)   { benchPageRank(b, 100) }\nfunc BenchmarkPageRank500(b *testing.B)   { benchPageRank(b, 500) }\nfunc BenchmarkPageRank1000(b *testing.B)  { benchPageRank(b, 1000) }\n\nfunc BenchmarkBetweenness100(b *testing.B)  { benchBetweenness(b, 100) }\nfunc BenchmarkBetweenness500(b *testing.B)  { benchBetweenness(b, 500) }\nfunc BenchmarkBetweenness1000(b *testing.B) { benchBetweenness(b, 1000) }\n\n// ... similar for HITS, Cycles, etc.\n```\n\n### 2. Full Analysis Benchmarks\n```go\nfunc BenchmarkFullAnalysis100(b *testing.B)\nfunc BenchmarkFullAnalysis500(b *testing.B)\nfunc BenchmarkFullAnalysis1000(b *testing.B)\nfunc BenchmarkFullAnalysis2000(b *testing.B)\n```\n\n### 3. Pathological Graph Benchmarks\n```go\nfunc BenchmarkCycles_ManyCycles30(b *testing.B)\nfunc BenchmarkCycles_CompleteGraph20(b *testing.B)\nfunc BenchmarkBetweenness_FullyConnected100(b *testing.B)\nfunc BenchmarkBetweenness_LongChain500(b *testing.B)\n```\n\n### 4. Graph Generators\n```go\nfunc generateSparseGraph(n int) []model.Issue      // ~2 deps per node\nfunc generateDenseGraph(n int) []model.Issue       // ~5 deps per node\nfunc generateChainGraph(n int) []model.Issue       // Linear chain\nfunc generateCyclicGraph(n int) []model.Issue      // One big cycle\nfunc generateManyCyclesGraph(n int) []model.Issue  // Overlapping cycles\nfunc generateCompleteGraph(n int) []model.Issue    // Every node to every other\nfunc generateDisconnectedGraph(n int) []model.Issue // Multiple components\n```\n\n## CI Integration\n\nAdd to CI pipeline:\n```yaml\n- name: Run benchmarks\n  run: go test -bench=. -benchmem ./pkg/analysis/... | tee bench.txt\n  \n- name: Compare with baseline\n  run: benchstat baseline.txt bench.txt\n```\n\n## Acceptance Criteria\n\n- [ ] Benchmarks for each algorithm at multiple scales\n- [ ] Pathological graph generators\n- [ ] Timeout tests (ensure timeouts trigger)\n- [ ] Memory benchmarks (-benchmem)\n- [ ] Baseline recorded for regression detection\n- [ ] CI integration documented\n\n## Files to Create\n\n- pkg/analysis/bench_test.go: Main benchmarks\n- pkg/analysis/bench_generators_test.go: Graph generators\n- pkg/analysis/bench_pathological_test.go: Edge case benchmarks","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T20:44:55.466310234Z","updated_at":"2025-11-29T23:18:08.633330218Z","closed_at":"2025-11-29T23:18:08.633330218Z","source_repo":".","labels":["infrastructure","performance","testing"]}
{"id":"beads_viewer-w7t.6","content_hash":"4473c0136f9073c3117b839aca519e1de69cd44ae8b4313a2a1d7c8561d97a0a","title":"E2E startup time validation with real beads samples","description":"## Purpose\n\nCreate end-to-end tests that measure actual startup time using real-world beads samples. This validates that optimizations work in practice, not just in synthetic benchmarks.\n\n## Test Approach\n\n### 1. Collect Real-World Samples\n\nCreate a collection of diverse real-world beads files:\n- Small project: ~20-50 issues\n- Medium project: ~100-300 issues\n- Large project: ~500-1000 issues\n- With cycles (if any exist in real data)\n- Dense dependencies vs sparse\n\n### 2. E2E Startup Test\n\n```go\nfunc TestE2EStartup_SmallProject(t *testing.T) {\n    path := \"testdata/real/small_project.jsonl\"\n    start := time.Now()\n    \n    issues, _ := loader.LoadIssuesFromFile(path)\n    an := analysis.NewAnalyzer(issues)\n    _ = an.Analyze()\n    \n    elapsed := time.Since(start)\n    t.Logf(\"Small project (%d issues): %v\", len(issues), elapsed)\n    \n    if elapsed \u003e 200*time.Millisecond {\n        t.Errorf(\"Startup too slow: %v (target \u003c200ms)\", elapsed)\n    }\n}\n```\n\n### 3. Performance Targets\n\n| Size | Issues | Target |\n|------|--------|--------|\n| Small | \u003c50 | \u003c100ms |\n| Medium | 50-300 | \u003c200ms |\n| Large | 300-1000 | \u003c500ms |\n| XL | 1000-5000 | \u003c2s |\n\n### 4. Regression Detection\n\nStore baseline timings and fail if regression \u003e20%:\n```go\nfunc TestE2EStartup_NoRegression(t *testing.T) {\n    // Load baseline from file\n    baseline := loadBaseline(\"startup_baseline.json\")\n    \n    for _, sample := range testSamples {\n        elapsed := measureStartup(sample.Path)\n        threshold := baseline[sample.Name] * 1.2  // 20% tolerance\n        \n        if elapsed \u003e threshold {\n            t.Errorf(\"%s regressed: %v \u003e %v (baseline * 1.2)\", \n                sample.Name, elapsed, threshold)\n        }\n    }\n}\n```\n\n### 5. Pathological Detection\n\nTest that the optimizer handles edge cases in real data:\n```go\nfunc TestE2EStartup_PathologicalSamples(t *testing.T) {\n    // These should NOT hang even if they have cycles\n    samples := []string{\n        \"testdata/pathological/dense_deps.jsonl\",\n        \"testdata/pathological/many_cycles.jsonl\",\n    }\n    \n    for _, path := range samples {\n        done := make(chan struct{})\n        go func() {\n            issues, _ := loader.LoadIssuesFromFile(path)\n            an := analysis.NewAnalyzer(issues)\n            _ = an.Analyze()\n            close(done)\n        }()\n        \n        select {\n        case \u003c-done:\n            t.Logf(\"%s completed\", path)\n        case \u003c-time.After(5 * time.Second):\n            t.Fatalf(\"%s HUNG - pathological case not handled!\", path)\n        }\n    }\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Test samples collected from real projects\n- [ ] E2E startup tests for each size category\n- [ ] Performance targets documented and enforced\n- [ ] Regression detection with baselines\n- [ ] Pathological sample tests\n- [ ] CI integration\n\n## Files to Create\n\n- tests/testdata/real/: Real-world sample files\n- tests/testdata/pathological/: Edge case samples\n- pkg/analysis/e2e_startup_test.go: E2E tests\n- tests/baselines/startup_baseline.json: Performance baselines","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T20:45:17.832372762Z","updated_at":"2025-11-30T03:51:32.950918358Z","closed_at":"2025-11-30T03:51:32.950925258Z","source_repo":".","labels":["e2e","testing","validation"],"dependencies":[{"issue_id":"beads_viewer-w7t.6","depends_on_id":"beads_viewer-w7t.5","type":"blocks","created_at":"2025-11-29T20:45:17.844648851Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.7","content_hash":"1653a954f42fdc1a66f48b3e38424bfc0cce3e29894cc107ca2203ea58e3c10c","title":"Implement size-based algorithm selection","description":"## Problem\n\nDifferent graph sizes need different strategies:\n- Small graphs (\u003c100 nodes): Run everything, it's fast\n- Medium graphs (100-500): Run with timeouts\n- Large graphs (500-2000): Skip expensive algorithms or use approximations\n- XL graphs (\u003e2000): Definitely skip betweenness, use sampling\n\n## Solution\n\nImplement tiered algorithm selection:\n\n```go\ntype AnalysisConfig struct {\n    ComputeBetweenness    bool\n    BetweennessTimeout    time.Duration\n    ComputePageRank       bool\n    PageRankTimeout       time.Duration\n    ComputeHITS           bool\n    HITSTimeout           time.Duration\n    ComputeCycles         bool\n    CyclesTimeout         time.Duration\n    MaxCyclesToStore      int\n}\n\nfunc DefaultConfigForSize(nodeCount, edgeCount int) AnalysisConfig {\n    density := float64(edgeCount) / float64(nodeCount*nodeCount)\n    \n    switch {\n    case nodeCount \u003c 100:\n        return AnalysisConfig{\n            ComputeBetweenness: true,\n            BetweennessTimeout: 2 * time.Second,\n            ComputePageRank:    true,\n            ComputeHITS:        true,\n            ComputeCycles:      true,\n            MaxCyclesToStore:   1000,\n        }\n    case nodeCount \u003c 500:\n        return AnalysisConfig{\n            ComputeBetweenness: true,\n            BetweennessTimeout: 500 * time.Millisecond,\n            ComputePageRank:    true,\n            ComputeHITS:        true,\n            ComputeCycles:      true,\n            MaxCyclesToStore:   100,\n        }\n    case nodeCount \u003c 2000:\n        return AnalysisConfig{\n            ComputeBetweenness: density \u003c 0.01, // Only if sparse\n            BetweennessTimeout: 200 * time.Millisecond,\n            ComputePageRank:    true,\n            ComputeHITS:        true,\n            ComputeCycles:      true,\n            MaxCyclesToStore:   50,\n        }\n    default: // XL\n        return AnalysisConfig{\n            ComputeBetweenness: false, // Too expensive\n            ComputePageRank:    true,\n            ComputeHITS:        density \u003c 0.001,\n            ComputeCycles:      false, // Too risky\n            MaxCyclesToStore:   10,\n        }\n    }\n}\n```\n\n## TUI Indication\n\nShow when metrics are skipped:\n```\nâ”Œâ”€ INSIGHTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Betweenness: [Skipped - graph too large]â”‚\nâ”‚ PageRank: 0.45 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘               â”‚\nâ”‚ ...                                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Acceptance Criteria\n\n- [ ] Config struct defines what to compute\n- [ ] Size-based defaults implemented\n- [ ] Density considered for sparse vs dense\n- [ ] TUI shows when metrics skipped\n- [ ] --force-full-analysis flag to override\n\n## Files to Modify\n\n- pkg/analysis/graph.go: Add config-based analysis\n- pkg/analysis/config.go: New file for config types\n- pkg/ui/insights.go: Show skipped metrics","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T20:45:39.768113988Z","updated_at":"2025-11-30T03:51:32.992792067Z","closed_at":"2025-11-30T03:51:32.992803567Z","source_repo":".","labels":["optimization","performance"],"dependencies":[{"issue_id":"beads_viewer-w7t.7","depends_on_id":"beads_viewer-w7t.1","type":"blocks","created_at":"2025-11-29T20:45:39.77446884Z","created_by":"daemon"},{"issue_id":"beads_viewer-w7t.7","depends_on_id":"beads_viewer-w7t.2","type":"blocks","created_at":"2025-11-29T20:45:39.776808059Z","created_by":"daemon"},{"issue_id":"beads_viewer-w7t.7","depends_on_id":"beads_viewer-w7t.3","type":"blocks","created_at":"2025-11-29T20:45:39.778350972Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.8","content_hash":"3546efdde55a37ef302a430004afca570cf07545572e0e2d3f633efa3eee907f","title":"Implement sampling-based betweenness approximation for large graphs","description":"## Problem\n\nExact betweenness centrality is O(V*E) and takes seconds for large graphs. For graphs with \u003e500 nodes, we either skip it entirely or need an approximation.\n\n## Solution\n\nImplement sampling-based approximation (Brandes' approximation):\n\nInstead of computing shortest paths from ALL nodes, sample k nodes and extrapolate:\n\n```go\nfunc ApproxBetweenness(g graph.Graph, sampleSize int) map[int64]float64 {\n    nodes := collectNodes(g)\n    n := len(nodes)\n    \n    if sampleSize \u003e= n {\n        return network.Betweenness(g)  // Exact for small graphs\n    }\n    \n    // Sample k random pivot nodes\n    pivots := randomSample(nodes, sampleSize)\n    \n    // Compute betweenness contribution from pivots only\n    partialBC := make(map[int64]float64)\n    for _, pivot := range pivots {\n        singleSourceBC(g, pivot, partialBC)\n    }\n    \n    // Scale up: BC_approx = BC_partial * (n / k)\n    scale := float64(n) / float64(sampleSize)\n    for id := range partialBC {\n        partialBC[id] *= scale\n    }\n    \n    return partialBC\n}\n```\n\n## Error Bounds\n\nWith k samples, approximation error is O(1/âˆšk):\n- k=50: ~14% error\n- k=100: ~10% error\n- k=200: ~7% error\n\nFor ranking purposes (which node is most central), this is usually sufficient.\n\n## Configuration\n\n```go\ntype BetweennessConfig struct {\n    Mode       string  // \"exact\", \"approximate\", \"skip\"\n    SampleSize int     // For approximate mode\n    Timeout    time.Duration\n}\n\n// For 1000 nodes:\n// - Exact: ~1.3s\n// - Approx (k=100): ~130ms (10x faster)\n```\n\n## Acceptance Criteria\n\n- [ ] Sampling-based approximation implemented\n- [ ] Configurable sample size\n- [ ] Fallback to exact for small graphs\n- [ ] Results marked as approximate in UI\n- [ ] Benchmark shows 10x+ speedup\n\n## Research Notes\n\n- Paper: \"A Faster Algorithm for Betweenness Centrality\" (Brandes, 2001)\n- Paper: \"Approximating Betweenness Centrality\" (Bader et al., 2007)\n\n## Files to Create\n\n- pkg/analysis/betweenness_approx.go","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T20:46:01.126749801Z","updated_at":"2025-11-30T07:21:44.366434178Z","closed_at":"2025-11-30T07:21:44.366434178Z","source_repo":".","labels":["advanced","performance","research"],"dependencies":[{"issue_id":"beads_viewer-w7t.8","depends_on_id":"beads_viewer-w7t.7","type":"blocks","created_at":"2025-11-29T20:46:01.131709887Z","created_by":"daemon"}]}
{"id":"beads_viewer-w7t.9","content_hash":"38262fc5521982812b012d0ba669f6f4d4a477b34bddb8ac35cc60d4f106c771","title":"Add analysis result caching","description":"## Problem\n\nWhen data hasn't changed, we recompute all metrics unnecessarily. This is wasteful, especially for expensive metrics like betweenness.\n\n## Solution\n\nCache analysis results keyed by data hash:\n\n```go\ntype AnalysisCache struct {\n    mu        sync.RWMutex\n    dataHash  string      // Hash of issue IDs + deps\n    stats     *GraphStats\n    computedAt time.Time\n    ttl       time.Duration\n}\n\nfunc (c *AnalysisCache) Get(issues []model.Issue) (*GraphStats, bool) {\n    c.mu.RLock()\n    defer c.mu.RUnlock()\n    \n    hash := computeDataHash(issues)\n    if hash == c.dataHash \u0026\u0026 time.Since(c.computedAt) \u003c c.ttl {\n        return c.stats, true\n    }\n    return nil, false\n}\n\nfunc (c *AnalysisCache) Set(issues []model.Issue, stats *GraphStats) {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    \n    c.dataHash = computeDataHash(issues)\n    c.stats = stats\n    c.computedAt = time.Now()\n}\n\nfunc computeDataHash(issues []model.Issue) string {\n    h := sha256.New()\n    for _, issue := range issues {\n        h.Write([]byte(issue.ID))\n        h.Write([]byte(issue.ContentHash))\n        for _, dep := range issue.Dependencies {\n            h.Write([]byte(dep.DependsOnID))\n        }\n    }\n    return hex.EncodeToString(h.Sum(nil))\n}\n```\n\n## Cache Strategy\n\n1. **In-memory cache**: Keep last computation\n2. **Hash-based invalidation**: Recompute only if data changed\n3. **TTL**: Expire after 5 minutes (configurable)\n4. **Partial invalidation**: If only Phase 1 metrics needed, skip Phase 2 recompute\n\n## Integration with Refresh\n\nWhen live refresh triggers:\n1. Compute data hash of new issues\n2. If hash matches cache, skip recomputation\n3. If hash differs, recompute (async for Phase 2)\n\n## Acceptance Criteria\n\n- [ ] Cache stores last analysis result\n- [ ] Hash-based invalidation works correctly\n- [ ] Cache hit skips expensive computation\n- [ ] TTL expires old cache entries\n- [ ] Works with live refresh system\n- [ ] Memory usage bounded\n\n## Files to Create\n\n- pkg/analysis/cache.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T20:46:20.999483919Z","updated_at":"2025-11-30T05:37:44.336718662Z","closed_at":"2025-11-30T05:37:44.336718662Z","source_repo":".","labels":["caching","performance"],"dependencies":[{"issue_id":"beads_viewer-w7t.9","depends_on_id":"beads_viewer-w7t.4","type":"blocks","created_at":"2025-11-29T20:46:21.011495713Z","created_by":"daemon"}]}
{"id":"beads_viewer-ym1","content_hash":"0840fab3d614f48564826189e95cab076ceb2f20a59f3fb1faa9ef5ba2cb9bcc","title":"Add pkg/ui styles, theme, and visuals tests","description":"Three UI files have ZERO test coverage totaling ~14KB of code:\n- pkg/ui/styles.go (6 functions, 80+ lines)\n- pkg/ui/theme.go (3 functions)\n- pkg/ui/visuals.go (4 functions)\n\n## Required Tests (NO MOCKS)\n\n### styles.go Tests\n- [ ] All panel style functions return valid lipgloss.Style\n- [ ] Border styles are properly configured\n- [ ] Padding values are correct for each style\n- [ ] Width constraints are respected\n- [ ] Style composition (nesting) works correctly\n- [ ] Styles adapt to terminal width\n\n### theme.go Tests\n- [ ] DefaultTheme() returns complete theme with all colors\n- [ ] GetStatusColor() returns correct color for each status:\n  - open -\u003e specific color\n  - in_progress -\u003e specific color\n  - closed -\u003e specific color\n  - blocked -\u003e specific color\n- [ ] GetTypeIcon() returns correct icon for each type:\n  - bug -\u003e bug icon\n  - feature -\u003e feature icon\n  - task -\u003e task icon\n  - epic -\u003e epic icon\n- [ ] Unknown status/type returns fallback values\n\n### visuals.go Tests\n- [ ] RenderSparkline() edge cases:\n  - val = 0.0 -\u003e empty bar\n  - val = 1.0 -\u003e full bar\n  - val = 0.5 -\u003e half bar\n  - val \u003c 0 -\u003e clamped to 0\n  - val \u003e 1 -\u003e clamped to 1\n  - width = 1, 5, 10, 20\n- [ ] GetHeatmapColor() boundaries:\n  - score = 0.0 -\u003e GradientLow\n  - score = 0.2 -\u003e GradientMid boundary\n  - score = 0.5 -\u003e GradientHigh boundary\n  - score = 0.8 -\u003e GradientPeak boundary\n  - score = 1.0 -\u003e GradientPeak\n- [ ] GetRepoColor() consistency:\n  - Same prefix always returns same color\n  - Different prefixes get different colors (within reason)\n  - Empty prefix returns fallback\n- [ ] RenderRepoBadge() formatting:\n  - Short prefix -\u003e full display\n  - Long prefix -\u003e truncated to 4 chars\n  - Empty prefix -\u003e empty string\n  - Badge contains brackets and uppercase\n\n## Test File\npkg/ui/visuals_test.go (create new)\npkg/ui/styles_test.go (create new)\npkg/ui/theme_test.go (create new)\n\n## Example\n```go\nfunc TestRenderSparkline(t *testing.T) {\n    tests := []struct {\n        name  string\n        val   float64\n        width int\n        want  string // or wantLen int\n    }{\n        {\"zero value\", 0.0, 10, \"          \"},\n        {\"full value\", 1.0, 10, \"â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\"},\n        {\"half value\", 0.5, 10, \"â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     \"},\n        {\"clamped negative\", -0.5, 10, \"          \"},\n    }\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            got := RenderSparkline(tt.val, tt.width)\n            if len(got) != tt.width {\n                t.Errorf(\"width = %d, got %d\", tt.width, len(got))\n            }\n        })\n    }\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T15:32:12.974518663Z","updated_at":"2025-11-30T16:53:26.536105273Z","closed_at":"2025-11-30T16:53:26.536105273Z","source_repo":".","labels":["rendering","testing","ui"]}
